{"version":3,"sources":["services/httpService.js","services/utilService.js","services/userService.js","store/actions/userActions.js","cmps/AppHeader.jsx","cmps/AppFooter.jsx","cmps/UserPreview.jsx","cmps/UserList.jsx","cmps/ItemPreview.jsx","pages/Home.jsx","cmps/ItemList.jsx","services/itemService.js","store/actions/itemActions.js","cmps/AppFilter.jsx","pages/Explore.jsx","cmps/ReviewPreview.jsx","cmps/ReviewList.jsx","services/orderService.js","store/actions/orderActions.js","cmps/ReviewAdd.jsx","pages/UserDetails.jsx","services/socketService.js","pages/ItemDetails.jsx","pages/LoginSignup.jsx","services/cloudinaryService.js","cmps/Uploader.jsx","pages/ItemEdit.jsx","App.js","store/reducers/itemReducer.js","store/reducers/userReducer.js","store/reducers/orderReducer.js","store/reducers/index.js","store/store.js","serviceWorkerRegistration.js","reportWebVitals.js","index.js"],"names":["BASE_URL","axios","Axios","create","withCredentials","httpService","endpoint","data","ajax","a","method","url","res","console","log","dir","response","status","window","location","assign","utilService","delay","ms","Promise","resolve","setTimeout","getRandomInt","min","max","Math","ceil","floor","random","makeId","length","txt","possible","i","charAt","calcRate","user","reviews","sum","map","review","rate","rateAvg","Number","round","toFixed","userService","query","filterBy","queryStr","name","save","userToSave","_id","remove","userId","getById","login","signup","logout","getLoggedinUser","JSON","parse","sessionStorage","getItem","userCred","_saveLocalUser","clear","setItem","stringify","loadUsers","dispatch","type","users","mapDispatchToProps","AppHeader","connect","state","loggedInUser","userModule","className","to","align","menuButton","src","imgUrls","profile","alt","onClick","AppFooter","UserPreview","tallMode","fullname","UserList","items","SwiperCore","use","Navigation","Pagination","Scrollbar","A11y","Autoplay","artists","artistIds","reduce","accUserMap","item","idx","seller","includes","push","filter","filterArtists","spaceBetween","breakpoints","500","slidesPerView","800","1000","1300","navigation","nextEl","prevEl","observer","updateOnWindowResize","autoplay","disableOnInteraction","onSwiper","swiper","onSlideChange","artist","ItemPreview","withProfile","minified","userRating","imgUrl","title","purchasedAt","price","color","readOnly","fontSize","_Home","props","getRandomItems","accRandItems","getLatestItems","sort","b","createdAt","windowWidth","windowHeight","updateWindowDimensions","bind","scrollTo","this","addEventListener","removeEventListener","setState","innerWidth","innerHeight","randomItems","latestItems","Button","variant","style","borderColor","pathname","backgroundImage","backgroundColor","Component","Home","itemModule","ItemList","columnsCountBreakPoints","450","700","gutter","itemService","add","update","filterTxt","itemToSave","itemId","loadItems","_AppFilter","initialFilter","handleChange","ev","value","target","onFilter","onSubmit","preventDefault","placeholder","autoComplete","onChange","AppFilter","_Explore","Explore","ReviewPreview","byUser","Date","toLocaleDateString","Rating","size","ReviewList","id","orderService","order","orderId","loadOrders","orders","getModalStyle","top","left","transform","borderRadius","useStyles","makeStyles","theme","paper","position","width","palette","background","border","boxShadow","shadows","padding","spacing","ReviewAdd","onAdd","currUser","classes","React","useState","modalStyle","open","setOpen","ratingValue","setValue","textAreaRef","createRef","handleClose","body","event","newValue","autoFocus","ref","current","endIcon","href","Modal","onClose","_UserDetails","onAddReview","now","unshift","editUser","loadUser","match","params","getItemsForDisplay","sorter","itemsForDisplay","getSoldItems","getBoughtItems","buyer","prevProps","reload","soldItems","boughtItems","shippingStatus","getTotalMoneyEarned","banner","sidenavContent","htmlFor","description","ButtonGroup","editedUser","UserDetails","orderModule","socketService","socket","setup","io","on","eventName","cb","off","emit","terminate","createSocketService","_ItemDetails","otherItems","onPurchase","history","addOrder","swal","text","timer","loadOtherItems","currItem","sellerId","find","tags","tag","disabled","580","860","addedOrder","ItemDetails","_LoginSignup","currPage","msg","loginCred","email","password","signupCred","loginHandleChange","prevState","signupHandleChange","doLogin","userCreds","doSignup","firstName","lastName","toUpperCase","slice","signupCreds","path","signupSection","TextField","label","loginSection","fontWeight","removeUser","LoginSignup","cloudinaryService","uploadImg","file","UPLOAD_URL","formData","FormData","append","fetch","json","Uploader","isUploading","onUploadImg","files","secure_url","onFinishUpload","hidden","accept","_ItemEdit","handleInput","field","onRemoveItem","removeItem","onSaveItem","editItem","addItem","addedItem","editedItem","ItemEdit","_App","onOrderIn","component","UserEdit","App","initialState","localLoggedInUser","rootReducer","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","Boolean","hostname","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.dace572f.chunk.js","sourcesContent":["import Axios from 'axios'\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'GET', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`)\r\n        console.dir(err)\r\n        if (err.response && err.response.status === 401) {\r\n            window.location.assign('/#/login')\r\n        }\r\n        throw err\r\n    }\r\n}","export const utilService = {\r\n    delay,\r\n    getRandomInt,\r\n    makeId,\r\n    calcRate\r\n}\r\n\r\nfunction delay(ms = 1500) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms)\r\n    })\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive\r\n}\r\n\r\nfunction calcRate(user) {\r\n    if (!user || !user.reviews.length) return\r\n    let sum = 0\r\n    user.reviews.map(review => sum += review.rate)\r\n    const rateAvg = sum / user.reviews.length\r\n    return Number((Math.round(rateAvg * 100) / 100).toFixed(1))\r\n}\r\n\r\nfunction makeId(length = 5) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}","import { httpService } from './httpService'\r\nimport { utilService } from './utilService'\r\n// import { storageService } from './asyncStorageService'\r\n// import userService from './userService'\r\n// import { utilService } from './utilService'\r\n\r\nexport const userService = {\r\n    query,\r\n    save,\r\n    remove,\r\n    getById,\r\n    login,\r\n    signup,\r\n    logout,\r\n    getLoggedinUser\r\n}\r\n\r\nfunction query(filterBy) {\r\n    var queryStr = (!filterBy) ? '' : `?fullname_like=${filterBy.name}&sort=anaAref`\r\n    return httpService.get(`user/${queryStr}`)\r\n    // return storageService.query('item')\r\n}\r\n\r\nfunction getById(userId) {\r\n    return httpService.get(`user/${userId}`)\r\n}\r\n\r\nfunction save(userToSave) {\r\n    return httpService.put(`user/${userToSave._id}`, userToSave)\r\n}\r\n\r\nfunction remove(userId) {\r\n    return httpService.delete(`user/${userId}`)\r\n    // return storageService.delete('item', itemId)\r\n}\r\n\r\nasync function login(userCred) {\r\n    // const users = await storageService.query('user')\r\n    // const user = users.find(user => user.email === userCred.email)\r\n    // return _handleLogin(user)\r\n    const user = await httpService.post('auth/login', userCred)\r\n    if (user) return _saveLocalUser(user)\r\n}\r\n\r\nasync function signup(userCred) {\r\n    // const user = await storageService.post('user', userCred)\r\n    const user = await httpService.post('auth/signup', userCred)\r\n    return _saveLocalUser(user)\r\n}\r\n\r\nasync function logout() {\r\n    sessionStorage.clear()\r\n    return await httpService.post('auth/logout')\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n    return JSON.parse(sessionStorage.getItem('loggedInUser'))\r\n}\r\n\r\nfunction _saveLocalUser(user) {\r\n    sessionStorage.setItem('loggedInUser', JSON.stringify(user))\r\n    console.log(user)\r\n    return user\r\n}","import { userService } from '../../services/userService'\r\n\r\n// THUNK action creators\r\n// Work asynchronously with the service and dispatch actions to the reducers \r\n\r\nexport function loadUsers() {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch({ type: 'LOADING_START' })\r\n      const users = await userService.query()\r\n      dispatch({ type: 'SET_USERS', users })\r\n    } catch (err) {\r\n      console.log('UserActions: err in loadUsers', err)\r\n    } finally {\r\n      dispatch({ type: 'LOADING_DONE' })\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeUser(userId) {\r\n  return async dispatch => {\r\n    try {\r\n      await userService.remove(userId)\r\n      dispatch({ type: 'REMOVE_USER', userId })\r\n    } catch (err) {\r\n      console.log('UserActions: err in removeUser', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function editUser(user) {\r\n  return async dispatch => {\r\n    try {\r\n      const editedUser = await userService.save(user)\r\n      console.log('editeduUser:', editedUser)\r\n      dispatch({ type: 'EDIT_USER', user: editedUser })\r\n    } catch (err) {\r\n      console.log('UserActions: err in addReview', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function login(userCreds) {\r\n  return async dispatch => {\r\n    try {\r\n      const user = await userService.login(userCreds)\r\n      dispatch({ type: 'SET_USER', user })\r\n    } catch (err) {\r\n      console.log('UserActions: err in login', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function signup(userCreds) {\r\n  return async dispatch => {\r\n    try {\r\n      const user = await userService.signup(userCreds)\r\n      dispatch({ type: 'SET_USER', user })\r\n    } catch (err) {\r\n      console.log('UserActions: err in signup', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function logout() {\r\n  return async dispatch => {\r\n    try {\r\n      await userService.logout()\r\n      dispatch({ type: 'SET_USER', user: null })\r\n    } catch (err) {\r\n      console.log('UserActions: err in logout', err)\r\n    }\r\n  }\r\n}","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { logout } from '../store/actions/userActions.js'\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\r\nimport AccountBoxIcon from '@material-ui/icons/AccountBox'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nimport {\r\n    Menu,\r\n    MenuItem,\r\n    MenuHeader,\r\n    MenuDivider\r\n} from '@szhsin/react-menu'\r\nimport '@szhsin/react-menu/dist/index.css'\r\n\r\nfunction _AppHeader({ loggedInUser, logout }) {\r\n\r\n    return (\r\n        <header>\r\n            <section className=\"main-layout flex j-between a-baseline\">\r\n                <div className=\"logo\"><Link to=\"/\">Arter</Link></div>\r\n                <nav className=\"flex\">\r\n                    <Link to=\"/explore\" className=\"link\"><h3>Explore</h3></Link>\r\n                    <Link to={loggedInUser ? '/item/edit' : '/login'} className=\"link\"><h3>Publish</h3></Link>\r\n                    {loggedInUser ?\r\n                        <Menu align=\"end\" menuButton={<img src={loggedInUser.imgUrls.profile} alt=\"\"/>}>\r\n                            <MenuHeader>Account</MenuHeader>\r\n                            <MenuItem><AccountBoxIcon /><Link to={`/user/${loggedInUser._id}`}>&nbsp;&nbsp;Profile</Link></MenuItem>\r\n                            <MenuDivider />\r\n                            <MenuItem><EditIcon /><Link to=\"/user/edit\">&nbsp;&nbsp;Edit Profile</Link></MenuItem>\r\n                            <MenuItem onClick={logout}><ExitToAppIcon /><Link to=\"/\">&nbsp;&nbsp;Logout</Link></MenuItem>\r\n                        </Menu>\r\n                        : <Link to=\"/login\"><AccountCircleIcon /></Link>}\r\n                </nav>\r\n            </section>\r\n        </header>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userModule.loggedInUser,\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    logout\r\n}\r\nexport const AppHeader = connect(mapStateToProps, mapDispatchToProps)(_AppHeader)","import { Link } from 'react-router-dom'\r\n\r\nexport function AppFooter() {\r\n    return <footer>\r\n        <div className=\"content main-layout flex j-between a-center\">\r\n            <section>\r\n                <div className=\"logo\"><Link to=\"/\">Arter</Link></div>\r\n                <h3>is an online marketplace created with the artist in mind.</h3>\r\n                <h3>Our application gives artists, both amateur and professional,</h3>\r\n                <h3>a social platform to share and sell their art with the world.</h3>\r\n            </section>\r\n            <section>\r\n                <p>Meet the team</p>\r\n                <div className=\"flex col\">\r\n                    <Link to=\"/\" className=\"link flex a-center\"><div className=\"profile-img eran\"></div><h3>Eran Harel</h3></Link>\r\n                    <Link to=\"/\" className=\"link flex a-center\"><div className=\"profile-img ohad\"></div><h3>Ohad Avitan</h3></Link>\r\n                    <Link to=\"/\" className=\"link flex a-center\"><div className=\"profile-img tom\"></div><h3>Tom Lebeodkin</h3></Link>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    </footer>\r\n}","import { Link } from 'react-router-dom'\r\n\r\nexport function UserPreview({ user, tallMode }) {\r\n    // console.log(user)\r\n\r\n    return <section className={tallMode ? \"user-preview\" : \"user-preview min\"}>\r\n        <Link to={`/user/${user._id}`}>\r\n            <img src={user.imgUrls.profile} alt=\"\"></img>\r\n            <div className=\"flex a-end\"><h3>{user.fullname}</h3></div>\r\n        </Link>\r\n        {/* <h3>{user.fullname}</h3> */}\r\n    </section>\r\n}","import { UserPreview } from './UserPreview.jsx'\r\nimport Swiper from 'react-id-swiper'\r\nimport { SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { Autoplay, Navigation, Pagination, Scrollbar, A11y } from 'swiper';\r\nimport 'swiper/swiper.scss';\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\n\r\nfunction filterArtists(users, items) {\r\n    const artistIds = items.reduce((accUserMap, item, idx) => {\r\n        const { _id } = item.seller\r\n        if (!accUserMap.includes(_id)) accUserMap.push(_id)\r\n        return accUserMap\r\n    }, [])\r\n    const artists = users.filter(user => artistIds.includes(user._id))\r\n    return artists\r\n}\r\n\r\n\r\nexport function UserList({ users, items, tallMode }) {\r\n    SwiperCore.use([Navigation, Pagination, Scrollbar, A11y, Autoplay]);\r\n\r\n    if (!users || !users.length) return <div></div>\r\n    const artists = filterArtists(users, items)\r\n\r\n    return <div className=\"user-list\">\r\n        <Swiper\r\n            spaceBetween={30}\r\n            breakpoints={{\r\n                // when window width is >= 580px\r\n                500: {\r\n                    slidesPerView: 2\r\n                },\r\n                800: {\r\n                    slidesPerView: 3\r\n                },\r\n                1000: {\r\n                    slidesPerView: 4\r\n                },\r\n                1300: {\r\n                    slidesPerView: 5\r\n                },\r\n            }}\r\n            navigation={{\r\n                nextEl: '.swiper-button-next',\r\n                prevEl: '.swiper-button-prev'\r\n            }}\r\n            observer\r\n            updateOnWindowResize\r\n            autoplay={{ delay: 2500, disableOnInteraction: false }}\r\n            // pagination={{\r\n            //     el: '.swiper-pagination',\r\n            //     clickable: true\r\n            // }}\r\n            // scrollbar={{ draggable: true }}\r\n            onSwiper={(swiper) => console.log(swiper)}\r\n            onSlideChange={() => console.log('slide change')}>\r\n\r\n            {artists.map(artist => {\r\n                return <SwiperSlide key={artist._id}>\r\n                    <UserPreview user={artist} tallMode={tallMode} />\r\n                </SwiperSlide>\r\n            })}\r\n        </Swiper>\r\n    </div>\r\n}","import { Fragment } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { utilService } from '../services/utilService.js'\r\nimport StarIcon from '@material-ui/icons/Star'\r\n// import FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder'\r\n\r\nexport function ItemPreview({ item, withProfile, minified }) {\r\n    const userRating = utilService.calcRate(item.seller)\r\n\r\n    if (minified) return <section className=\"item-preview min\">\r\n        <Link to={`/item/${item._id}`}><img className={'item-img min'} src={item.imgUrl} alt=\"\" /></Link>\r\n        <div className=\"item-info\">\r\n            <div className=\"flex j-between a-center\">\r\n                <Link to={`/item/${item._id}`}><h3>{item.title}</h3></Link>\r\n                {item.purchasedAt ? <p className=\"site-clr3\">SOLD</p> : <p>${item.price}</p>}\r\n            </div>\r\n            {withProfile && <Link to={`/user/${item.seller._id}`} className=\"user-name\"><p>{item.seller.fullname}</p></Link>}\r\n        </div>\r\n    </section>\r\n\r\n\r\n\r\n    return <section className=\"item-preview\">\r\n        <Link to={`/item/${item._id}`}><img className=\"item-img\" src={item.imgUrl} alt=\"\" /></Link>\r\n        <div className=\"flex j-between\">\r\n            <div className=\"item-info\">\r\n                {withProfile && <div className=\"flex j-between\">\r\n                    <div className=\"flex\">\r\n                        <Link to={`/user/${item.seller._id}`} className=\"user-name flex a-center\"><p>{item.seller.fullname}</p></Link>\r\n                        {userRating &&\r\n                            <Fragment>\r\n                                <StarIcon color=\"secondary\" readOnly fontSize=\"small\" />\r\n                                <p className=\"user-rating font-mont\">{userRating}</p>\r\n                            </Fragment>}\r\n                    </div>\r\n                </div>}\r\n                <Link to={`/item/${item._id}`}><h3>{item.title}</h3></Link>\r\n                {item.purchasedAt ? <p className=\"site-clr3\">SOLD</p> : <p className=\"font-mont\">${item.price}</p>}\r\n            </div>\r\n            {/* <FavoriteBorderIcon className=\"fav-icon pointer site-clr3\" fontSize=\"\" /> */}\r\n        </div>\r\n    </section>\r\n}","import { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { UserList } from '../cmps/UserList.jsx'\r\nimport { Button } from '@material-ui/core'\r\nimport { ItemPreview } from '../cmps/ItemPreview.jsx'\r\nimport { utilService } from '../services/utilService.js'\r\n\r\n\r\nclass _Home extends Component {\r\n\r\n    // componentDidMount() {  }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { windowWidth: 0, windowHeight: 0 };\r\n        this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.scrollTo(0, 0)\r\n        this.updateWindowDimensions();\r\n        window.addEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n\r\n    updateWindowDimensions() {\r\n        this.setState({ windowWidth: window.innerWidth, windowHeight: window.innerHeight });\r\n    }\r\n\r\n    getRandomItems = items => {\r\n        return items.reduce((accRandItems, item, idx) => {\r\n            item = items[utilService.getRandomInt(0, items.length)]\r\n            if (!accRandItems.includes(item) && !item.purchasedAt && accRandItems.length <= 3) accRandItems.push(item)\r\n            return accRandItems\r\n        }, [])\r\n    }\r\n\r\n    getLatestItems = items => {\r\n        const sortedItems = items.sort((a, b) => b.createdAt - a.createdAt)\r\n        return sortedItems.filter((item, idx) => { if (idx <= 3) return item })\r\n    }\r\n\r\n    render() {\r\n        const { users, items, loggedInUser } = this.props\r\n        const { windowWidth, windowHeight } = this.state\r\n        const randomItems = this.getRandomItems(items)\r\n        const latestItems = this.getLatestItems(items)\r\n\r\n        return <section className=\"home m-page\">\r\n            <div className=\"hero\">\r\n                <div className=\"hero-content main-layout flex j-center a-center\">\r\n                    <h2>Find New Creations</h2>\r\n                    <h2>Get To Know The Artists</h2>\r\n                    <div className=\"btn-cta\"><Link to=\"/explore\" className=\"link\"><Button variant=\"outlined\" style={{ color: 'white', borderColor: 'white' }}>Discover</Button></Link></div>\r\n                </div>\r\n            </div>\r\n\r\n            <main>\r\n                <article className=\"main-layout\">\r\n                    <label>Hot Categories</label>\r\n                    <section className=\"categories flex wrap j-between txt-center\">\r\n                        <div className=\"flex col\">\r\n                            <Link to={{ pathname: \"/explore\", type: \"Glass\" }}>\r\n                                <div className=\"flex a-center j-center\"\r\n                                    style={{ backgroundImage: `url(https://res.cloudinary.com/arter/image/upload/v1611425886/Home%20topics/tiqlnoshz1qkpmjec3yi.jpg)` }}>\r\n                                    {windowWidth < 1300 && <h5>Glasswork</h5>}\r\n                                </div>\r\n                                {windowWidth > 1300 && <h5>Glasswork</h5>}\r\n                            </Link>\r\n                        </div>\r\n                        <div className=\"flex col\">\r\n                            <Link to={{ pathname: \"/explore\", type: \"Wood\" }}>\r\n                                <div className=\"flex a-center j-center\"\r\n                                    style={{ backgroundImage: `url(https://res.cloudinary.com/arter/image/upload/v1611431953/Home%20topics/kpdnlxgr5sczqeo9sfom.jpg)` }}>\r\n                                    {windowWidth < 1300 && <h5>Woodwork</h5>}\r\n                                </div>\r\n                                {windowWidth > 1300 && <h5>Woodwork</h5>}\r\n                            </Link>\r\n                        </div>\r\n                        <div className=\"flex col\">\r\n                            <Link to={{ pathname: \"/explore\", type: \"Painting\" }}>\r\n                                <div className=\"flex a-center j-center\"\r\n                                    style={{ backgroundImage: `url(https://res.cloudinary.com/arter/image/upload/v1610825845/Home%20topics/painting1_fvloac.jpg)` }}>\r\n                                    {windowWidth < 1300 && <h5>Paintings</h5>}\r\n                                </div>\r\n                                {windowWidth > 1300 && <h5>Paintings</h5>}\r\n                            </Link>\r\n                        </div>\r\n                        <div className=\"flex col\">\r\n                            <Link to={{ pathname: \"/explore\", type: \"Jewelry\" }}>\r\n                                <div className=\"flex a-center j-center\"\r\n                                    style={{ backgroundImage: `url(https://res.cloudinary.com/arter/image/upload/v1610825888/Home%20topics/jewlery_ifguvi.jpg)` }}>\r\n                                    {windowWidth < 1300 && <h5>Jewelry</h5>}\r\n                                </div>\r\n                                {windowWidth > 1300 && <h5>Jewelry</h5>}\r\n                            </Link>\r\n                        </div>\r\n                        <div className=\"flex col\">\r\n                            <Link to={{ pathname: \"/explore\", type: \"Crafts\" }}>\r\n                                <div className=\"flex a-center j-center\"\r\n                                    style={{ backgroundImage: `url(https://res.cloudinary.com/arter/image/upload/v1610826083/Home%20topics/origami-crafts_yx7ejc.jpg)` }}>\r\n                                    {windowWidth < 1300 && <h5>Crafts</h5>}\r\n                                </div>\r\n                                {windowWidth > 1300 && <h5>Crafts</h5>}\r\n                            </Link>\r\n                        </div>\r\n                    </section>\r\n                </article>\r\n                <article className=\"main-layout\">\r\n                    <div className=\"flex j-between a-center\">\r\n                        <label>Latest Works</label>\r\n                        <Link to=\"/explore\" className=\"see-more\">See More...</Link>\r\n                    </div>\r\n                    <div className=\"latest-works flex j-between wrap\">\r\n                        {latestItems.map(item => {\r\n                            return <ItemPreview key={item._id} item={item} minified withProfile />\r\n                        })}\r\n                    </div>\r\n                </article>\r\n                <article className=\"our-services\">\r\n                    <article className=\"our-services-container main-layout flex j-center a-center\">\r\n                        <h2>Join The Family</h2>\r\n                        <h2>Share Your Arts</h2>\r\n                        <div className=\"btn-cta\"><Link to={loggedInUser ? '/item/edit' : '/login'}><Button variant=\"outlined\" style={{ backgroundColor: '#13acca', color: 'white' }}>Publish Now</Button></Link></div>\r\n                    </article>\r\n                </article>\r\n                <article className=\"main-layout\">\r\n                    <div className=\"flex j-between a-center\">\r\n                        <label>Our Experts Choices</label>\r\n                        <Link to=\"/explore\" className=\"see-more\">See More...</Link>\r\n                    </div>\r\n                    <div className=\"featured-creations flex j-between wrap\">\r\n                        {randomItems.map(item => {\r\n                            return <ItemPreview key={item._id} item={item} minified withProfile />\r\n                        })}\r\n                    </div>\r\n                </article>\r\n                <article className=\"main-layout\">\r\n                    <label>Top Artists</label>\r\n                    <UserList users={users} items={items} tallMode />\r\n                </article>\r\n                {/* <GetStarted /> */}\r\n            </main>\r\n        </section>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        loggedInUser: state.userModule.loggedInUser,\r\n        users: state.userModule.users,\r\n        items: state.itemModule.items\r\n    }\r\n}\r\nexport const Home = connect(mapStateToProps)(_Home)","import { ItemPreview } from \"./ItemPreview.jsx\"\r\nimport Masonry, { ResponsiveMasonry } from \"react-responsive-masonry\"\r\n\r\nexport function ItemList({ items, minified, withProfile }) {\r\n\r\n    if (!items.length) {\r\n        return <div className=\"item-list main-layout\">\r\n            <p className=\"no-items-txt muted\">No items found...</p>\r\n        </div>\r\n    }\r\n    return (\r\n        <ResponsiveMasonry columnsCountBreakPoints={{ 450: 1, 700: 2, 1000: 3 }}>\r\n            <Masonry gutter=\"30px\">\r\n                {items.map(item => {\r\n                    return <ItemPreview key={item._id} item={item} withProfile={withProfile} minified={minified} />\r\n                })}\r\n            </Masonry>\r\n        </ResponsiveMasonry>\r\n    )\r\n}","import { httpService } from './httpService'\r\n// import { storageService } from './asyncStorageService'\r\n// import userService from './userService'\r\n// import { utilService } from './utilService'\r\n\r\nexport const itemService = {\r\n    add,\r\n    update,\r\n    query,\r\n    save,\r\n    remove,\r\n    getById\r\n}\r\n\r\n// More ways to send query params:\r\n// return axios.get('api/toy/?id=1223&balance=13')\r\n// return axios.get('api/toy/?', {params: {id: 1223, balanse:13}})\r\n\r\nfunction query(filterTxt) {\r\n    var queryStr = (!filterTxt) ? '' : `?txt=${filterTxt}`\r\n    return httpService.get(`item${queryStr}`)\r\n    // return storageService.query('item')\r\n}\r\n\r\nfunction getById(itemId) {\r\n    return httpService.get(`item/${itemId}`)\r\n}\r\n\r\nfunction save(itemToSave) {\r\n    if (itemToSave._id)\r\n        return httpService.put(`item/${itemToSave._id}`, itemToSave) // UPDATE\r\n    else\r\n        return httpService.post('item/', itemToSave) // CREATE\r\n}\r\n\r\nfunction remove(itemId) {\r\n    return httpService.delete(`item/${itemId}`)\r\n    // return storageService.delete('item', itemId)\r\n\r\n}\r\nfunction add(item) {\r\n    return httpService.post(`item`, item)\r\n}\r\n\r\nfunction update(item) {\r\n    // console.log('item', item)\r\n    return httpService.put(`item/${item._id}`, item)\r\n}","import { itemService } from \"../../services/itemService\"\r\n\r\nexport function loadItems(filterBy) {\r\n    return async dispatch => {\r\n        try {\r\n            const items = await itemService.query(filterBy)\r\n            if (!filterBy) dispatch({ type: 'SET_ITEMS', items })\r\n            return items\r\n        } catch (err) {\r\n            console.log('itemActions:', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function addItem(item) {\r\n    // console.log('item!!', item)\r\n    return async dispatch => {\r\n        try {\r\n            const addedItem = await itemService.add(item)\r\n            dispatch({ type: 'ADD_ITEM', item: addedItem })\r\n        } catch (err) {\r\n            console.log('itemActions:', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function editItem(item) {\r\n    // console.log('item', item)\r\n    return async dispatch => {\r\n        try {\r\n            const editedItem = await itemService.update(item)\r\n            dispatch({ type: 'EDIT_ITEM', item: editedItem })\r\n        } catch (err) {\r\n            console.log('itemActions:', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeItem(itemId) {\r\n    return async dispatch => {\r\n        try {\r\n            await itemService.remove(itemId)\r\n            dispatch({ type: 'REMOVE_ITEM', itemId })\r\n        } catch (err) {\r\n            console.log('itemActions:', err)\r\n        }\r\n    }\r\n}","import React from 'react'\r\nimport { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { loadItems } from '../store/actions/itemActions'\r\n\r\nclass _AppFilter extends Component {\r\n\r\n    state = {\r\n        txt: this.props.initialFilter || '',\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.onFilter(this.state.txt)\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const { value } = ev.target\r\n        this.setState(({ txt: value }), () => this.props.onFilter(this.state.txt))\r\n    }\r\n\r\n    onSubmit = ev => ev.preventDefault()\r\n\r\n    render() {\r\n        const { txt } = this.state\r\n\r\n        return (\r\n            <section className=\"app-filter\">\r\n                <form className=\"filter-form\" onSubmit={this.onSubmit}>\r\n                    <input className=\"search-bar\" placeholder=\"Search\" type=\"text\" autoComplete=\"off\" name='txt' value={txt} onChange={this.handleChange} />\r\n                </form>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // loggedInUser: state.userModule.loggedInUser\r\n        items: state.itemModule.items\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadItems\r\n}\r\nexport const AppFilter = connect(mapStateToProps, mapDispatchToProps)(_AppFilter)","import { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { UserList } from '../cmps/UserList.jsx'\r\nimport { ItemList } from '../cmps/ItemList.jsx'\r\nimport { AppFilter } from '../cmps/AppFilter'\r\nimport { loadItems } from '../store/actions/itemActions'\r\nimport swal from '@sweetalert/with-react'\r\n\r\nclass _Explore extends Component {\r\n\r\n    // onSetFilter = (filterTxt) => {\r\n    //     this.props.loadItems(filterTxt)\r\n    // }\r\n\r\n    state = {\r\n        items: [],\r\n        txt: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.scrollTo(0, 0)\r\n        this.setState({ items: this.props.items })\r\n\r\n        // swal({\r\n        //     className: \"swal\",\r\n        //     // icon: \"success\",\r\n        //     title: \"Purchase completed!\",\r\n        //     text: \"You can view your purchase details in your profile page.\",\r\n        //     timer: 6000,\r\n        // })\r\n\r\n    }\r\n\r\n    onFilter = async txt => {\r\n        const items = await this.props.loadItems(txt)\r\n        this.setState({ items, txt })\r\n    }\r\n\r\n    render() {\r\n        const { users } = this.props\r\n        const { items, txt } = this.state\r\n\r\n        return <section className=\"explore m-page main-layout\">\r\n            <AppFilter initialFilter={this.props.location.type} onFilter={this.onFilter} />\r\n            <p>Top Artists</p>\r\n            <UserList users={users} items={this.props.items} />\r\n            <p className={txt ? \"visible\" : \"hidden\"}>Results for {txt}</p>\r\n            <ItemList users={users} items={items} withProfile />\r\n        </section>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        users: state.userModule.users,\r\n        items: state.itemModule.items,\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadItems\r\n}\r\nexport const Explore = connect(mapStateToProps, mapDispatchToProps)(_Explore)","import React from 'react'\r\nimport { Rating } from '@material-ui/lab'\r\nimport { Link } from 'react-router-dom'\r\n// import { UserPreview } from './UserPreview';\r\n// import { LongTxt } from './LongTxt';\r\n\r\n\r\nexport function ReviewPreview({ review }) {\r\n\r\n    return <article className=\"review-preview\">\r\n        <Link to={`/user/${review.byUser._id}`} className=\"reviewer-info flex a-center\">\r\n            <img src={review.byUser.imgUrl} alt=\"\"></img>\r\n            <div>\r\n                <h4>{review.byUser.fullname}</h4>\r\n                <small className=\"muted\">{new Date(review.createdAt).toLocaleDateString(\"en-US\")}</small>\r\n            </div>\r\n        </Link>\r\n        <Rating value={review.rate} readOnly size=\"small\" />\r\n        <p>{review.txt}</p>\r\n    </article>\r\n}","import { ReviewPreview } from './ReviewPreview.jsx'\r\n\r\nexport function ReviewList({ reviews }) {\r\n\r\n    return <section className=\"review-list\">\r\n        {reviews.length ? reviews.map(review => <ReviewPreview key={review.id} review={review} />) : <p className=\"muted\">No reviews yet...</p>}\r\n    </section>\r\n}","import { httpService } from './httpService'\r\n// import { storageService } from './asyncStorageService'\r\n// import userService from './userService'\r\n// import { utilService } from './utilService'\r\n\r\nexport const orderService = {\r\n    add,\r\n    update,\r\n    query,\r\n    // save,\r\n    getById\r\n    // remove,\r\n}\r\n\r\n// More ways to send query params:\r\n// return axios.get('api/toy/?id=1223&balance=13')\r\n// return axios.get('api/toy/?', {params: {id: 1223, balanse:13}})\r\n\r\nfunction query(filterTxt) {\r\n    var queryStr = (!filterTxt) ? '' : `?tags_like=${filterTxt}`\r\n    return httpService.get(`order/${queryStr}`)\r\n    // return storageService.query('order')\r\n}\r\n\r\nfunction getById(orderId) {\r\n    return httpService.get(`order/${orderId}`)\r\n}\r\n\r\n// function save(orderToSave) {\r\n//     if (orderToSave._id)\r\n//         return httpService.put(`order/${orderToSave._id}`, orderToSave) // UPDATE\r\n//     else\r\n//         return httpService.post('order/', orderToSave) // CREATE\r\n// }\r\n\r\nfunction add(item) {\r\n    console.log('orderService: (ADD)')\r\n    return httpService.post(`order/`, item)\r\n}\r\n\r\nfunction update(order) {\r\n    // console.log('order', order)\r\n    return httpService.put(`order/${order._id}`, order)\r\n}\r\n\r\n\r\n\r\n// function remove(orderId) {\r\n//     return httpService.delete(`order/${orderId}`)\r\n//     // return storageService.delete('order', orderId)\r\n\r\n// }","import { orderService } from \"../../services/orderService\"\r\n\r\nexport function loadOrders(filterBy) {\r\n    return async dispatch => {\r\n        try {\r\n            const orders = await orderService.query(filterBy)\r\n            dispatch({ type: 'SET_ORDERS', orders })\r\n        } catch (err) {\r\n            console.log('orderActions:', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function addOrder(item) {\r\n    // console.log('order!!', order)\r\n    return async dispatch => {\r\n        try {\r\n            console.log('orderActions: (ADD)')\r\n            const addedOrder = await orderService.add(item)\r\n            dispatch({ type: 'ADD_ORDER', order: addedOrder })\r\n            return addedOrder\r\n        } catch (err) {\r\n            console.log('orderActions:', err)\r\n            throw err\r\n        }\r\n    }\r\n}\r\n\r\nexport function editOrder(order) {\r\n    // console.log('order', order)\r\n    return async dispatch => {\r\n        try {\r\n            const editedOrder = await orderService.update(order)\r\n            dispatch({ type: 'EDIT_ORDER', order: editedOrder })\r\n        } catch (err) {\r\n            console.log('orderActions:', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeOrder(orderId) {\r\n    return async dispatch => {\r\n        try {\r\n            await orderService.remove(orderId)\r\n            dispatch({ type: 'REMOVE_ORDER', orderId })\r\n        } catch (err) {\r\n            console.log('orderActions:', err)\r\n        }\r\n    }\r\n}","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport SendIcon from '@material-ui/icons/Send'\r\nimport { Button } from '@material-ui/core'\r\nimport { Rating } from '@material-ui/lab'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction getModalStyle() {\r\n    return {\r\n        top: `${50}%`,\r\n        left: `${50}%`,\r\n        transform: `translate(-${50}%, -${50}%)`,\r\n        borderColor: 'darkgray',\r\n        borderRadius: `${5}px`\r\n    };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        position: 'absolute',\r\n        width: 430,\r\n        backgroundColor: theme.palette.background.paper,\r\n        border: '1px solid #000',\r\n        boxShadow: theme.shadows[5],\r\n        borderRadius: `${2}px`,\r\n        padding: theme.spacing(2, 4, 3)\r\n    },\r\n}));\r\n\r\nfunction _ReviewAdd({ onAdd, currUser, loggedInUser }) {\r\n    const classes = useStyles();\r\n    // getModalStyle is not a pure function, we roll the style only on the first render\r\n    const [modalStyle] = React.useState(getModalStyle);\r\n    const [open, setOpen] = React.useState(false);\r\n    const [ratingValue, setValue] = React.useState(5);\r\n    const textAreaRef = React.createRef()\r\n\r\n    const handleOpen = () => {\r\n        if (!loggedInUser) return window.location.href = '#/login'\r\n        else if (loggedInUser._id === currUser._id) return\r\n        setOpen(true)\r\n    }\r\n\r\n    const handleClose = () => setOpen(false)\r\n\r\n    const body = (\r\n        <div style={modalStyle} className={classes.paper}>\r\n            <div className=\"flex j-between\">\r\n                <h3>Add Review</h3>\r\n                <Rating\r\n                    name=\"rating\"\r\n                    value={ratingValue}\r\n                    onChange={(event, newValue) => {\r\n                        if (newValue) setValue(newValue)\r\n                    }} />\r\n            </div>\r\n            <p>Let your voice be heard</p>\r\n            <textarea autoFocus ref={textAreaRef}></textarea>\r\n            <div className=\"btns-container right\">\r\n                <Button onClick={handleClose}>Close</Button>\r\n                <Button variant=\"contained\" style={{ backgroundColor: '#13acca', color: 'white' }}\r\n                    onClick={() => { onAdd(textAreaRef.current.value, ratingValue); handleClose() }} endIcon={<SendIcon></SendIcon>}>Post</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    return <div>\r\n        <AddIcon className={loggedInUser && loggedInUser._id === currUser._id ? \"add-btn pointer disabled\" : \"add-btn pointer\"} onClick={handleOpen} fontSize=\"large\" />\r\n        <Modal\r\n            className=\"review-add-modal\"\r\n            open={open}\r\n            onClose={handleClose}>\r\n            {body}\r\n        </Modal>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userModule.loggedInUser\r\n    }\r\n}\r\nexport const ReviewAdd = connect(mapStateToProps)(_ReviewAdd)","import { Component, Fragment } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { userService } from '../services/userService.js'\r\nimport { utilService } from '../services/utilService.js'\r\nimport { ReviewList } from '../cmps/ReviewList.jsx'\r\nimport { loadOrders } from '../store/actions/orderActions.js'\r\n// import { AppFilter } from '../cmps/AppFilter.jsx'\r\nimport { editUser } from '../store/actions/userActions.js'\r\nimport { ItemList } from '../cmps/ItemList.jsx'\r\nimport { ReviewAdd } from '../cmps/ReviewAdd.jsx'\r\nimport { Rating } from '@material-ui/lab'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button, ButtonGroup } from '@material-ui/core'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\n\r\nclass _UserDetails extends Component {\r\n\r\n    state = {\r\n        user: null,\r\n        items: []\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.props.loadOrders()\r\n        this.loadUser()\r\n        this.getItemsForDisplay()\r\n        window.scrollTo(0, 0)\r\n    }\r\n\r\n    async componentDidUpdate(prevProps) {\r\n        if (this.props.match.params.id !== prevProps.match.params.id) {\r\n            window.location.reload()\r\n            this.props.loadOrders()\r\n            this.loadUser()\r\n            this.getItemsForDisplay()\r\n            window.scrollTo(0, 0)\r\n        }\r\n    }\r\n\r\n    onAddReview = (txt, rate) => {\r\n        const { loggedInUser } = this.props\r\n        let { user } = this.state\r\n        let { reviews } = user\r\n        const review = {\r\n            id: utilService.makeId(),\r\n            createdAt: Date.now(),\r\n            txt,\r\n            rate,\r\n            byUser: {\r\n                _id: loggedInUser._id,\r\n                fullname: loggedInUser.fullname,\r\n                imgUrl: loggedInUser.imgUrls.profile\r\n            }\r\n        }\r\n        reviews.unshift(review)\r\n        user = { ...user, reviews }\r\n        this.props.editUser(user)\r\n    }\r\n\r\n    loadUser = async () => {\r\n        const { id } = this.props.match.params\r\n        const user = await userService.getById(id)\r\n        this.setState({ user })\r\n    }\r\n\r\n    getItemsForDisplay = async (sorter = 'all') => {\r\n        const { id } = this.props.match.params\r\n        const { items } = this.props\r\n        let itemsForDisplay\r\n        switch (sorter) {\r\n            case 'all':\r\n                itemsForDisplay = items.filter(item => id === item.seller._id)\r\n                break\r\n            case 'sold':\r\n                itemsForDisplay = items.filter(item => id === item.seller._id && item.purchasedAt)\r\n                break\r\n            case 'forSale':\r\n                itemsForDisplay = items.filter(item => id === item.seller._id && !item.purchasedAt)\r\n                break\r\n            // case 'purchased':\r\n            // const itemsForDisplay = items.filter(item =>\r\n        }\r\n        this.setState({ items: itemsForDisplay })\r\n    }\r\n\r\n    getSoldItems = () => {\r\n        const { user } = this.state\r\n        const { orders } = this.props\r\n        if (!orders.length || !user) return\r\n        return orders.filter(order => {\r\n            if (order.seller._id === user._id) return order\r\n        })\r\n    }\r\n\r\n    getBoughtItems = () => {\r\n        const { user } = this.state\r\n        const { orders } = this.props\r\n        if (!orders.length || !user) return\r\n        return orders.filter(order => {\r\n            if (order.buyer._id === user._id) return order\r\n        })\r\n    }\r\n\r\n    getTotalMoneyEarned() {\r\n        const soldItems = this.getSoldItems()\r\n        console.log(soldItems)\r\n        let sum = 0\r\n        if (soldItems) soldItems.map(item => sum += item.item.price)\r\n        return sum\r\n    }\r\n\r\n    sidenavContent(status) {\r\n        const { user } = this.state\r\n        const { loggedInUser } = this.props\r\n        const soldItems = this.getSoldItems()\r\n        const boughtItems = this.getBoughtItems()\r\n\r\n        return <aside className={status === 'normal' ? \"sidebar\" : \"sidebar mobile\"}>\r\n            {/* <AppFilter /> */}\r\n            {loggedInUser && loggedInUser._id === user._id && <Link to={`/user/edit/${user._id}`}><button className=\"custom-order-btn\">Edit Profile</button></Link>}\r\n            {loggedInUser && loggedInUser._id === user._id && <button className=\"custom-order-btn\">Notifications</button>}\r\n            <button className=\"custom-order-btn\">Custom Order</button>\r\n            <button className=\"custom-order-btn\">Contact Me</button>\r\n            <button className=\"custom-order-btn\">Favourites</button>\r\n            {loggedInUser && loggedInUser._id === user._id &&\r\n                <Fragment>\r\n                    <ul><h4>Items Bought</h4>\r\n                        {boughtItems.length ?\r\n                            boughtItems.map(order => {\r\n                                return <li key={order._id}><a href={`#/item/${order.item._id}`}>{order.item.title}</a>,\r\n                  bought from <a href={`#/user/${order.seller._id}`}>{order.seller.fullname}</a>\r\n                                    <p className=\"muted\">Shipping Status: {order.shippingStatus}</p>\r\n                                </li>\r\n                            })\r\n                            : <p className=\"muted\">Nothing bought yet...</p>}\r\n                    </ul>\r\n                    <div className=\"border-bottom\"></div>\r\n                    <ul><h4>Items Sold</h4>\r\n                        {soldItems.length ?\r\n                            soldItems.map(order => {\r\n                                return <li key={order._id}><a href={`#/item/${order.item._id}`}>{order.item.title}</a>,\r\n                  bought by <a href={`#/user/${order.buyer._id}`}>{order.buyer.fullname}</a>\r\n                                    <p className=\"muted\">Shipping Status: {order.shippingStatus}</p>\r\n                                </li>\r\n                            })\r\n                            : <p className=\"muted\">Nothing sold yet...</p>}\r\n                    </ul>\r\n                    <div className=\"border-bottom\"></div>\r\n                    <p>Total earnings: ${this.getTotalMoneyEarned()}</p>\r\n                </Fragment>}\r\n        </aside >\r\n    }\r\n\r\n    render() {\r\n        const { user, items } = this.state\r\n        const { loggedInUser } = this.props\r\n        const userRating = utilService.calcRate(user)|| 0\r\n\r\n        if (!user) return <div className=\"loader-container\"><div className=\"loader m-page\"></div></div>\r\n        return (\r\n            <section className=\"user-details main-layout m-page\">\r\n                <div className=\"profile-header\">\r\n                    <img className=\"banner-img\" src={user.imgUrls.banner} alt=\"\"\r\n                        onClick={() => loggedInUser && loggedInUser._id === user._id && console.log('THIS IS MY BANNER')} />\r\n                    <img className=\"profile-img\" src={user.imgUrls.profile} alt={user.fullname}\r\n                        onClick={() => loggedInUser && loggedInUser._id === user._id && console.log('THIS IS MY PROFILE')} />\r\n                </div>\r\n                <div className=\"content flex\">\r\n                    {this.sidenavContent('normal')}\r\n                    <div className=\"main\">\r\n                        <div className=\"about-user\">\r\n                            <div className=\"flex j-between a-center\">\r\n                                <h1>{user.fullname}</h1>\r\n                                <div className=\"mobile-sidebar\">\r\n                                    <div className=\"contact-btns-mobile flex a-center\">\r\n                                        <p className=\"site-clr3\">Custom Order</p>\r\n                                        <p className=\"site-clr1\">Contact Me</p>\r\n                                        <label htmlFor=\"mobile-sidebar-checkbox\"><MenuIcon className=\"pointer\" /></label>\r\n                                    </div>\r\n                                    <input type=\"checkbox\" id=\"mobile-sidebar-checkbox\" className=\"d-none\" />\r\n                                    <nav className=\"d-none\">{this.sidenavContent('mobile')}</nav>\r\n                                </div>\r\n                            </div>\r\n                            <br />\r\n                            <p className=\"desc-txt\">{user.description}</p>\r\n                        </div>\r\n\r\n                        <div className=\"portfolio-container flex a-center j-between\">\r\n                            <h3>Portfolio</h3>\r\n                            <ButtonGroup variant=\"text\" size=\"small\">\r\n                                <Button onClick={() => this.getItemsForDisplay('all')}>All</Button>\r\n                                <Button onClick={() => this.getItemsForDisplay('sold')}>Sold</Button>\r\n                                <Button onClick={() => this.getItemsForDisplay('forSale')}>For Sale</Button>\r\n                            </ButtonGroup>\r\n                        </div>\r\n                        <ItemList items={items} />\r\n                        <div className=\"review-container flex a-center j-between\">\r\n                            <div className=\"flex\">\r\n                                <h3>Reviews</h3>\r\n                                <Rating name=\"rating\" value={userRating} readOnly />\r\n                                <p className=\"muted font-mont rate-num\">({user.reviews.length})</p>\r\n                            </div>\r\n                            {<ReviewAdd onAdd={this.onAddReview} currUser={user} />}\r\n                        </div>\r\n                        <ReviewList reviews={user.reviews} />\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userModule.loggedInUser,\r\n        items: state.itemModule.items,\r\n        orders: state.orderModule.orders\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    editUser,\r\n    loadOrders\r\n}\r\nexport const UserDetails = connect(mapStateToProps, mapDispatchToProps)(_UserDetails)","import io from 'socket.io-client'\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService()\r\n// export const socketService = createDummySocketService()\r\n\r\nwindow.socketService = socketService\r\n\r\n\r\nfunction createSocketService() {\r\n  var socket\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl)\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb)\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb)\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data)\r\n    },\r\n    terminate() {\r\n      socket = null\r\n    }\r\n  }\r\n  return socketService\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction createDummySocketService() {\r\n  var listenersMap = {}\r\n  const socketService = {\r\n    setup() {\r\n      listenersMap = {}\r\n    },\r\n    terminate() {\r\n      this.setup()\r\n    },\r\n    on(eventName, cb) {\r\n      listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n    },\r\n    off(eventName, cb) {\r\n      if (!listenersMap[eventName]) return\r\n      listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n    },\r\n    emit(eventName, data) {\r\n      if (!listenersMap[eventName]) return\r\n      listenersMap[eventName].forEach(listener => {\r\n        listener(data)\r\n      })\r\n    },\r\n    debugMsg() {\r\n      this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n    },\r\n  }\r\n  return socketService\r\n}\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log(x)}\r\n// socketService.on('baba', cb)\r\n// socketService.emit('baba', 'DATA')\r\n// socketService.off('baba', cb)\r\n","import React from 'react'\r\nimport { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { itemService } from '../services/itemService.js'\r\nimport { utilService } from '../services/utilService.js'\r\nimport { Rating } from '@material-ui/lab'\r\nimport { Link } from 'react-router-dom'\r\nimport { ItemPreview } from \"../cmps/ItemPreview.jsx\"\r\nimport Swiper from 'react-id-swiper'\r\nimport { SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { Autoplay, Navigation, Pagination, Scrollbar, A11y } from 'swiper';\r\nimport 'swiper/swiper.scss';\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\nimport { loadItems } from '../store/actions/itemActions.js'\r\nimport { addOrder } from '../store/actions/orderActions.js'\r\nimport { socketService } from '../services/socketService.js'\r\nimport swal from '@sweetalert/with-react'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\n\r\nclass _ItemDetails extends Component {\r\n\r\n    state = {\r\n        item: null,\r\n        otherItems: []\r\n    }\r\n\r\n    async componentDidMount() {\r\n        SwiperCore.use([Navigation, Pagination, Scrollbar, A11y, Autoplay]);\r\n        this.loadOtherItems()\r\n        window.scrollTo(0, 0)\r\n    }\r\n\r\n    async componentDidUpdate(prevProps) {\r\n        if (this.props.match.params.id !== prevProps.match.params.id) {\r\n            this.loadOtherItems()\r\n            window.scrollTo(0, 0)\r\n        }\r\n    }\r\n\r\n    async loadOtherItems() {\r\n        const { id } = this.props.match.params\r\n        const { items } = this.props\r\n        const item = await itemService.getById(id)\r\n        const otherItems = items.filter(currItem =>\r\n            (item.sellerId === currItem.seller._id) && (item._id !== currItem._id)\r\n        )\r\n        this.setState({ item, otherItems })\r\n    }\r\n\r\n    onPurchase = async () => {\r\n        if (!this.props.loggedInUser) this.props.history.push('/login')\r\n        const { item } = this.state\r\n        console.log(item)\r\n        try {\r\n            const order = await this.props.addOrder(item)\r\n            console.log(order);\r\n            console.log('SUCCESS !')\r\n            socketService.emit('ORDER_OUT', order)\r\n            this.setState({item: order.item})\r\n            return swal({\r\n                className: \"swal\",\r\n                title: \"Purchase completed!\",\r\n                text: \"You can view your purchase details in your profile page\",\r\n                timer: 6000,\r\n            })\r\n        } catch (err) {\r\n            console.log('Purchase Failed');\r\n            return swal({\r\n                className: \"swal\",\r\n                title: \"Oops!\",\r\n                text: \"There was a problem with the purchase process.\",\r\n                timer: 6000,\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { item, otherItems } = this.state\r\n        const { loggedInUser } = this.props\r\n        if (!item || !this.props.users.length) return <div className=\"loader-container\"><div className=\"loader m-page\"></div></div>\r\n        const user = this.props.users.find(user => item.sellerId === user._id)\r\n        const userRating = utilService.calcRate(user)\r\n        console.log(user._id === item.sellerId)\r\n\r\n        return (\r\n            <section className=\"item-details m-page\">\r\n                <div className=\"main-layout flex col\">\r\n                    <h1>{item.title}</h1>\r\n                    <div className=\"item-container flex\">\r\n                        <img className=\"item-img\" src={item.imgUrl} alt={item.title} />\r\n                        <div className=\"item-desc flex col\">\r\n                            <div className=\"flex j-between\">\r\n                                <h2>About this piece</h2>\r\n                                {(loggedInUser && loggedInUser._id === item.sellerId) && <Link to={`/item/edit/${item._id}`}><EditIcon /></Link>}\r\n                            </div>\r\n                            <p className=\"desc-txt\">{item.description}</p>\r\n                            <p className=\"size-txt\">Size:&nbsp;&nbsp;{item.size}</p>\r\n                            <div className=\"tags flex\">{item.tags.map((tag, idx) => { return <small key={idx}>#<Link to={{ pathname: \"/explore\", type: tag }}>{tag}</Link>&nbsp;&nbsp;&nbsp;</small> })}</div>\r\n                            {item.purchasedAt ? <p className=\"site-clr3\">SOLD</p> : <p>${item.price}</p>}\r\n                            <div className=\"flex col j-between grow\">\r\n                                <div className=\"profile-container flex a-center\">\r\n                                    <Link to={`/user/${item.sellerId}`} className=\"flex a-center\"><img src={user.imgUrls.profile} alt={user.fullname} />\r\n                                        <div className=\"flex col\">\r\n                                            <h4>{user.fullname}</h4>\r\n                                            <div className=\"flex\">\r\n                                                <Rating name=\"rating\" value={userRating} readOnly size=\"small\" />\r\n                                                <p className=\"muted font-mont\">({user.reviews.length})</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </Link>\r\n                                </div>\r\n                                <div className=\"check-marks flex col muted\">\r\n                                    <div className=\"flex a-center\"><CheckIcon fontSize=\"small\" />Express Shipping</div>\r\n                                    <div className=\"flex a-center\"><CheckIcon fontSize=\"small\" />Certificate of Authenticity included</div>\r\n                                    <div className=\"flex a-center\"><CheckIcon fontSize=\"small\" />Returns Accepted 14 days</div>\r\n                                </div>\r\n                                {<button className=\"purchase-btn font-mont\" disabled={(loggedInUser && loggedInUser._id === item.sellerId) || item.purchasedAt}\r\n                                    onClick={(loggedInUser && loggedInUser._id !== item.sellerId) ? this.onPurchase\r\n                                        : () => this.props.history.push('/login')}>Purchase</button>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"other-works\">\r\n                    <div className=\"main-layout\">\r\n                        <h3>Other Works By {user.fullname}:</h3>\r\n                        {otherItems.length ? <Swiper\r\n                            spaceBetween={80}\r\n                            // slidesPerView={4}\r\n                            breakpoints={{\r\n                                // when window width is >= 580px\r\n                                580: {\r\n                                    slidesPerView: 2\r\n                                },\r\n                                860: {\r\n                                    slidesPerView: 3,\r\n                                },\r\n                                1300: {\r\n                                    slidesPerView: 4,\r\n                                },\r\n                            }}\r\n                            navigation={{\r\n                                nextEl: '.swiper-button-next',\r\n                                prevEl: '.swiper-button-prev'\r\n                            }}\r\n                            observer\r\n                            updateOnWindowResize\r\n                            autoplay={{ delay: 2500, disableOnInteraction: false }}\r\n                            // pagination={{\r\n                            //     el: '.swiper-pagination',\r\n                            //     clickable: true\r\n                            // }}\r\n                            // scrollbar={{ draggable: true }}\r\n                            onSwiper={(swiper) => console.log(swiper)}\r\n                            onSlideChange={() => console.log('slide change')}>\r\n                            {otherItems.map(item => {\r\n                                return <SwiperSlide key={item._id}>\r\n                                    <ItemPreview item={item} user={user} minified />\r\n                                </SwiperSlide>\r\n                            })}\r\n                        </Swiper> : <p className=\"muted\">No works yet...</p>}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        loggedInUser: state.userModule.loggedInUser,\r\n        items: state.itemModule.items,\r\n        users: state.userModule.users\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadItems,\r\n    addOrder\r\n}\r\nexport const ItemDetails = connect(mapStateToProps, mapDispatchToProps)(_ItemDetails)","import { Component } from 'react'\r\nimport { TextField } from '@material-ui/core'\r\nimport { Button } from '@material-ui/core'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\n// import FaceIcon from '@material-ui/icons/Face'\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'\r\nimport SecurityIcon from '@material-ui/icons/Security'\r\nimport VpnKeyIcon from '@material-ui/icons/VpnKey'\r\nimport VerifiedUserIcon from '@material-ui/icons/VerifiedUser'\r\n\r\nimport {\r\n    loadUsers,\r\n    removeUser,\r\n    login,\r\n    logout,\r\n    signup\r\n} from '../store/actions/userActions'\r\nimport { socketService } from '../services/socketService'\r\n\r\nclass _LoginSignup extends Component {\r\n\r\n    state = {\r\n        currPage: '/login',\r\n        msg: '',\r\n        loginCred: {\r\n            email: '',\r\n            password: ''\r\n        },\r\n        signupCred: {\r\n            password: '',\r\n            fullname: '',\r\n            email: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.scrollTo(0, 0)\r\n        this.setState({ currPage: this.props.match.path })\r\n    }\r\n\r\n    loginHandleChange = ev => {\r\n        const { name, value } = ev.target\r\n        this.setState(prevState => ({\r\n            loginCred: {\r\n                ...prevState.loginCred,\r\n                [name]: value\r\n            }\r\n        }))\r\n    }\r\n\r\n    signupHandleChange = ev => {\r\n        const { name, value } = ev.target\r\n        this.setState(prevState => ({\r\n            signupCred: {\r\n                ...prevState.signupCred,\r\n                [name]: value\r\n            }\r\n        }))\r\n    }\r\n\r\n    doLogin = async ev => {\r\n        ev.preventDefault()\r\n        const { email, password } = this.state.loginCred\r\n        if (!email || !password) {\r\n            return this.setState({ msg: 'Please enter user/password' })\r\n        }\r\n        const userCreds = { email, password }\r\n        try {\r\n            await this.props.login(userCreds)\r\n            this.setState({ loginCred: { email: '', password: '' } })\r\n            if (sessionStorage['loggedInUser']) {\r\n                socketService.emit('LOGIN', this.props.loggedInUser)\r\n                this.props.history.push('/')\r\n            }\r\n        } catch (err) {\r\n            return await this.setState({ msg: 'Login failed, try again.' })\r\n        }\r\n    }\r\n\r\n    doSignup = async ev => {\r\n        ev.preventDefault()\r\n        let { email, password, firstName, lastName } = this.state.signupCred\r\n        if (!email || !password || !firstName || !lastName || !email) {\r\n            return this.setState({ msg: 'All inputs are required' })\r\n        }\r\n        firstName = firstName.charAt(0).toUpperCase() + firstName.slice(1)\r\n        lastName = lastName.charAt(0).toUpperCase() + lastName.slice(1)\r\n        let fullname = firstName + ' ' + lastName\r\n        const signupCreds = { email, password, fullname }\r\n        await this.props.signup(signupCreds)\r\n        this.setState({ signupCred: { email: '', password: '', fullname: '' } })\r\n        if (sessionStorage['loggedInUser']) this.props.history.push('/')\r\n    }\r\n\r\n    render() {\r\n        const { loggedInUser } = this.props\r\n\r\n        let signupSection = (\r\n            <form className=\"frm-signup flex col\" onSubmit={this.doSignup}>\r\n                <h2>Create Account</h2>\r\n                <TextField\r\n                    type=\"text\"\r\n                    color=\"secondary\"\r\n                    name=\"email\"\r\n                    value={this.state.signupCred.email}\r\n                    onChange={this.signupHandleChange}\r\n                    label=\"Email\"\r\n                />\r\n                <TextField\r\n                    type=\"text\"\r\n                    color=\"secondary\"\r\n                    name=\"firstName\"\r\n                    value={this.state.signupCred.firstName}\r\n                    onChange={this.signupHandleChange}\r\n                    label=\"First Name\"\r\n                />\r\n                <TextField\r\n                    type=\"text\"\r\n                    color=\"secondary\"\r\n                    name=\"lastName\"\r\n                    value={this.state.signupCred.lastName}\r\n                    onChange={this.signupHandleChange}\r\n                    label=\"Last Name\"\r\n                />\r\n                <TextField\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    color=\"secondary\"\r\n                    value={this.state.signupCred.password}\r\n                    onChange={this.signupHandleChange}\r\n                    label=\"Password\"\r\n                />\r\n                <Button className=\"signup-btn\" type=\"submit\" color=\"secondary\" variant=\"contained\">SIGN UP</Button>\r\n            </form>\r\n        )\r\n        let loginSection = (\r\n            <form className=\"frm-login flex col\" onSubmit={this.doLogin}>\r\n                <h2>Sign In</h2>\r\n                <TextField\r\n                    type=\"text\"\r\n                    name=\"email\"\r\n                    value={this.state.loginCred.email}\r\n                    onChange={this.loginHandleChange}\r\n                    label=\"Email\"\r\n                />\r\n                <TextField\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    value={this.state.loginCred.password}\r\n                    onChange={this.loginHandleChange}\r\n                    label=\"Password\"\r\n                />\r\n                <Button className=\"login-btn\" type=\"submit\" variant=\"contained\">SIGN IN</Button>\r\n\r\n                <div className=\"filler-logos flex j-between\">\r\n                    <SecurityIcon></SecurityIcon>\r\n                    <VpnKeyIcon></VpnKeyIcon>\r\n                    <LockOutlinedIcon></LockOutlinedIcon>\r\n                    <VerifiedUserIcon></VerifiedUserIcon>\r\n                </div>\r\n            </form>\r\n        )\r\n\r\n        const { msg } = this.state\r\n        const { currPage } = this.state\r\n        return (\r\n            <div className=\"flex j-center\">\r\n                <div className=\"login-signup\">\r\n                    {loggedInUser && (\r\n                        <div>\r\n                            <h3>\r\n                                Welcome {loggedInUser.fullname}\r\n                                <Button color=\"secondary\" onClick={this.props.logout}>LOGOUT</Button>\r\n                            </h3>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"btn-group flex\">\r\n                        <Link to='/login' className=\"link\"><Button style={{ color: \"#13acca\", fontWeight: \"bold\" }} onClick={() => { this.setState({ currPage: '/login' }) }}>Login</Button></Link>\r\n                        <Link to='/signup' className=\"link\"><Button style={{ fontWeight: \"bold\" }} color=\"secondary\" onClick={() => { this.setState({ currPage: '/signup' }) }}>Signup</Button></Link>\r\n                    </div>\r\n                    <p className=\"muted red\">{msg ? '* ' + msg : ''}</p>\r\n                    <div className=\"lock-icon-div flex j-center\">\r\n                        <AccountCircleIcon fontSize=\"large\" className={currPage === '/login' ? \"site-clr1\" : \"site-clr3\"}></AccountCircleIcon></div>\r\n                    {(!loggedInUser && currPage === '/login') && loginSection}\r\n                    {(!loggedInUser && currPage === '/signup') && signupSection}\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.userModule.users,\r\n        loggedInUser: state.userModule.loggedInUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    removeUser,\r\n    loadUsers\r\n}\r\nexport const LoginSignup = connect(mapStateToProps, mapDispatchToProps)(_LoginSignup)","export const cloudinaryService = {\r\n    uploadImg\r\n}\r\nasync function uploadImg(file) {\r\n    const CLOUD_NAME = 'arter'\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file)\r\n    formData.append('upload_preset', 'arter-preset');\r\n    try {\r\n        const res = await fetch(UPLOAD_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        const data = await res.json()\r\n        return data\r\n\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n}\r\n","import { Component } from 'react'\r\nimport { cloudinaryService } from '../services/cloudinaryService'\r\n\r\nexport class Uploader extends Component {\r\n    state = {\r\n        isUploading: false\r\n    }\r\n    onUploadImg = async ev => {\r\n        this.setState({ isUploading: true })\r\n        const { secure_url } = await cloudinaryService.uploadImg(ev.target.files[0])\r\n        this.setState({ isUploading: false }, () => this.props.onFinishUpload(secure_url))\r\n    }\r\n    render() {\r\n        const { isUploading } = this.state\r\n        return (\r\n            <div className=\"uploader\"\r\n            // style={ uploadStyle }\r\n            >\r\n                <label htmlFor=\"imageUploader\">{isUploading ? 'Uploading....' : 'Upload Image'}</label>\r\n                <input onChange={this.onUploadImg} hidden type=\"file\" accept=\"image/*\" id=\"imageUploader\" />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { loadItems, addItem, editItem, removeItem } from '../store/actions/itemActions'\r\nimport { TextField } from '@material-ui/core'\r\nimport { Button } from '@material-ui/core'\r\nimport { Uploader } from '../cmps/Uploader.jsx'\r\n\r\nclass _ItemEdit extends Component {\r\n\r\n    state = {\r\n        item: {\r\n            title: '',\r\n            price: 0,\r\n            description: '',\r\n            imgUrl: ''\r\n            // tags: ['Traditional'],\r\n            // seller: this.props.loggedInUser.email\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        // if (!this.props.items.length) await this.props.loadItems()\r\n        window.scrollTo(0, 0)\r\n        const { id } = this.props.match.params\r\n        if (id) {\r\n            const item = this.props.items.find(item => item._id === id)\r\n            this.setState({ item: item })\r\n        }\r\n    }\r\n\r\n    onUploadImg = (url) => {\r\n        this.setState(prevState => {\r\n            return {\r\n                item: {\r\n                    ...prevState.item,\r\n                    imgUrl: url\r\n                }\r\n            }\r\n        })\r\n        console.log('img url', url);\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name\r\n        let value = target.value\r\n        value = (field === 'price') ? +value : value\r\n        if (field === 'price' && value < 0) return\r\n\r\n        this.setState(prevState => {\r\n            return {\r\n                item: {\r\n                    ...prevState.item,\r\n                    [field]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    onRemoveItem = async (itemId) => {\r\n        const { item } = this.state\r\n        await this.props.removeItem(itemId)\r\n        this.props.history.push(`/user/${item.seller._id}`)\r\n    }\r\n\r\n    onSaveItem = async (ev) => {\r\n        ev.preventDefault()\r\n        const { item } = this.state\r\n        if (item._id) {\r\n            await this.props.editItem(item)\r\n            this.props.history.push(`/item/${item._id}`)\r\n        } else {\r\n            await this.props.addItem(item)\r\n            this.props.history.push(`/user/${item.seller._id}`)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        // console.log(this.props.loggedInUser)\r\n        const { item } = this.state\r\n        if (!item) return <div className=\"loader m-page\"></div>\r\n        return (\r\n            <div className=\"item-edit m-page\">\r\n                {/* <h3>{toy._id ? 'Update' : 'Add'} Toy</h3> */}\r\n                <form className=\"flex col j-between\" autoComplete=\"off\" onSubmit={this.onSaveItem}>\r\n                    <TextField id=\"standard-secondary\" label=\"Name\" type=\"text\" name=\"title\" value={item.title} placeholder=\"Title\" color=\"secondary\" onChange={this.handleInput} />\r\n                    <TextField label=\"Price\" type=\"number\" value={item.price} onChange={this.handleInput} name=\"price\" />\r\n                    <textarea label=\"Description\" type=\"text\" value={item.description} onChange={this.handleInput} name=\"description\" />\r\n                    <Uploader onFinishUpload={this.onUploadImg} />\r\n                    <div>\r\n                        {item._id && <Button type=\"button\" onClick={() => this.onRemoveItem(item._id)}>Delete Item</Button>}\r\n                        <Button type=\"submit\">Save</Button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        loggedInUser: state.userModule.loggedInUser,\r\n        users: state.userModule.users,\r\n        items: state.itemModule.items,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadItems,\r\n    addItem,\r\n    editItem,\r\n    removeItem\r\n}\r\n\r\nexport const ItemEdit = connect(mapStateToProps, mapDispatchToProps)(_ItemEdit)\r\n\r\n\r\n\r\n\r\n\r\n{/* <TextField id=\"standard-secondary\" label=\"Name\" type=\"text\" name=\"name\" value={item.title} placeholder=\"Title\" color=\"secondary\" onChange={this.handleInput} />\r\n<TextField label=\"Price\" type=\"number\" min=\"0\" value={item.price} onChange={this.handleInput} name=\"price\" />\r\n<TextField label=\"Description\" type=\"text\" value={item.description} onChange={this.handleInput} name=\"description\" />\r\n<Button type=\"submit\" color='secondary'>Save</Button> */}","import { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport './styles/global.scss'\r\nimport { AppHeader } from './cmps/AppHeader.jsx'\r\nimport { AppFooter } from './cmps/AppFooter.jsx'\r\nimport { Home } from './pages/Home.jsx';\r\nimport { Explore } from './pages/Explore.jsx';\r\nimport { UserDetails } from './pages/UserDetails.jsx';\r\nimport { ItemDetails } from './pages/ItemDetails.jsx';\r\nimport { loadItems } from './store/actions/itemActions.js'\r\nimport { loadUsers } from './store/actions/userActions.js'\r\nimport { loadOrders } from './store/actions/orderActions.js'\r\nimport { LoginSignup } from './pages/LoginSignup'\r\nimport { ItemEdit } from './pages/ItemEdit'\r\nimport { UserEdit } from './pages/UserEdit'\r\nimport { socketService } from './services/socketService.js'\r\nimport swal from '@sweetalert/with-react'\r\n\r\nclass _App extends Component {\r\n\r\n  async componentDidMount() {\r\n    await this.props.loadItems()\r\n    await this.props.loadUsers()\r\n    await this.props.loadOrders()\r\n    socketService.setup()\r\n    socketService.on('ORDER_IN', this.onOrderIn)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    socketService.terminate()\r\n  }\r\n\r\n  onOrderIn = order => {\r\n    return swal(\r\n      <div className=\"swal\">\r\n        <h1>Hey there!</h1>\r\n        <p><a className=\"site-clr1\" href={`#/user/${order.buyer._id}`}>{order.buyer.fullname}</a> has just bought <a className=\"site-clr1\" href={`#/item/${order.item._id}`}>{order.item.title}</a> from you!</p>\r\n        <p>You can view your sold items details in your <a className=\"site-clr1\" href={`#/user/${order.seller._id}`}> Profile Page.</a></p>\r\n      </div>)\r\n  }\r\n\r\n  render() {\r\n    const { users, items, orders } = this.props\r\n\r\n    return (\r\n      <main>\r\n        <AppHeader />\r\n        {items?.length && users?.length && orders?.length ?\r\n          <Switch>\r\n            <Route path=\"/signup\" component={LoginSignup} />\r\n            <Route path=\"/login\" component={LoginSignup} />\r\n            <Route path=\"/item/edit/:id?\" component={ItemEdit} />\r\n            <Route path=\"/item/:id\" component={ItemDetails} />\r\n            <Route path=\"/user/edit/:id?\" component={UserEdit} />\r\n            <Route path=\"/user/:id\" component={UserDetails} />\r\n            <Route path=\"/explore\" component={Explore} />\r\n            <Route path=\"/\" component={Home} />\r\n          </Switch> : ''}\r\n        <AppFooter />\r\n      </main >\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    items: state.itemModule.items,\r\n    users: state.userModule.users,\r\n    orders: state.orderModule.orders\r\n  }\r\n}\r\nconst mapDispatchToProps = {\r\n  loadItems,\r\n  loadUsers,\r\n  loadOrders\r\n}\r\nexport const App = connect(mapStateToProps, mapDispatchToProps)(_App)","const initialState = {\r\n    items: [],\r\n    // filterBy: { type: 'All', name: '' , inStock: true }\r\n}\r\n\r\nexport function itemReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_ITEMS':\r\n            return { ...state, items: action.items }\r\n        case 'EDIT_ITEM':\r\n            return {\r\n                ...state,\r\n                items: state.items.map(item => (item._id === action.item._id) ? action.item : item)\r\n            }\r\n        case 'ADD_ITEM':\r\n            return {\r\n                ...state,\r\n                items: [...state.items, action.item]\r\n            }\r\n        case 'REMOVE_ITEM':\r\n            return { ...state, items: state.items.filter(item => item._id !== action.itemId) }\r\n        default:\r\n            return state\r\n    }\r\n} \r\n\r\n\r\n\r\n\r\n// case 'FILTER_ITEMS':\r\n        //     return { ...state, filterBy: action.filterBy }","let localLoggedInUser = null\r\nif (sessionStorage.loggedInUser) localLoggedInUser = JSON.parse(sessionStorage.loggedInUser)\r\n\r\nconst initialState = {\r\n  loggedInUser: localLoggedInUser,\r\n  users: []\r\n}\r\n\r\nexport function userReducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      return { ...state, loggedInUser: action.user }\r\n    case 'REMOVE_USER':\r\n      return {\r\n        ...state,\r\n        users: state.users.filter(user => user._id !== action.userId)\r\n      }\r\n    case 'SET_USERS':\r\n      return { ...state, users: action.users }\r\n    case 'EDIT_USER':\r\n      console.log('editAction:', action )\r\n      return {\r\n        ...state,\r\n        users: state.users.map(user => (user._id === action.user._id) ? action.user : user)\r\n      }\r\n    case 'REMOVE_REVIEW':\r\n      return\r\n    default:\r\n      return state\r\n  }\r\n}","const initialState = {\r\n    orders: [],\r\n    // filterBy: { type: 'All', name: '' , inStock: true }\r\n}\r\n\r\nexport function orderReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_ORDERS':\r\n            return { ...state, orders: action.orders }\r\n        case 'EDIT_ORDER':\r\n            return {\r\n                ...state,\r\n                orders: state.orders.map(order => (order._id === action.order._id) ? action.order : order)\r\n            }\r\n        case 'ADD_ORDER':\r\n            return {\r\n                ...state, orders: [...state.orders, action.order]\r\n            }\r\n        case 'REMOVE_ORDER':\r\n            return { ...state, orders: state.orders.filter(order => order._id !== action.orderId) }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// case 'FILTER_ORDERS':\r\n        //     return { ...state, filterBy: action.filterBy }","import { combineReducers } from 'redux'\r\nimport { itemReducer } from './itemReducer'\r\nimport { userReducer } from './userReducer'\r\nimport { orderReducer } from './orderReducer'\r\n\r\nexport const rootReducer = combineReducers({\r\n    itemModule: itemReducer,\r\n    userModule: userReducer,\r\n    orderModule: orderReducer\r\n})","import { createStore, applyMiddleware, compose } from 'redux'\r\nimport thunk from 'redux-thunk';\r\nimport { rootReducer } from './reducers'\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\nexport const store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunk))\r\n)","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","const reportWebVitals = (onPerfEntry) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './App';\r\nimport { Provider } from 'react-redux'\r\nimport { store } from './store/store'\r\nimport { HashRouter as Router } from 'react-router-dom'\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.unregister();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();"],"sourceRoot":""}