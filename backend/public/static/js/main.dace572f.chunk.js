(this.webpackJsonparter=this.webpackJsonparter||[]).push([[0],{148:function(e,t){},168:function(e,t,n){},227:function(e,t){},232:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(0),a=n.n(s),c=n(15),i=n.n(c),o=n(7),l=n.n(o),u=n(11),d=n(22),j=n(23),h=n(26),p=n(25),m=n(18),b=n(20),f=(n(168),n(12)),x=n(133),O="/api/",v=n.n(x).a.create({withCredentials:!0}),g=function(e,t){return I(e,"GET",t)},w=function(e,t){return I(e,"POST",t)},y=function(e,t){return I(e,"PUT",t)},N=function(e,t){return I(e,"DELETE",t)};function I(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(l.a.mark((function e(t){var n,r,s,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"GET",r=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,v({url:"".concat(O).concat(t),method:n,data:r});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S={delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},calcRate:function(e){if(!e||!e.reviews.length)return;var t=0;e.reviews.map((function(e){return t+=e.rate}));var n=t/e.reviews.length;return Number((Math.round(100*n)/100).toFixed(1))}};var _={query:function(e){var t=e?"?fullname_like=".concat(e.name,"&sort=anaAref"):"";return g("user/".concat(t))},save:function(e){return y("user/".concat(e._id),e)},remove:function(e){return N("user/".concat(e))},getById:function(e){return g("user/".concat(e))},login:function(e){return U.apply(this,arguments)},signup:function(e){return C.apply(this,arguments)},logout:function(){return E.apply(this,arguments)},getLoggedinUser:function(){return JSON.parse(sessionStorage.getItem("loggedInUser"))}};function U(){return(U=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("auth/login",t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",M(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("auth/signup",t);case 2:return n=e.sent,e.abrupt("return",M(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.clear(),e.next=3,w("auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return sessionStorage.setItem("loggedInUser",JSON.stringify(e)),console.log(e),e}function D(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,_.query();case 4:n=e.sent,t({type:"SET_USERS",users:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 11:return e.prev=11,t({type:"LOADING_DONE"}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}function A(){return function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.logout();case 3:t({type:"SET_USER",user:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("UserActions: err in logout",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}var R=n(138),T=n.n(R),P=n(134),F=n.n(P),L=n(78),W=n.n(L),H=n(79),z=n.n(H),B=n(48);n(186);var V={logout:A},G=Object(m.b)((function(e){return{loggedInUser:e.userModule.loggedInUser}}),V)((function(e){var t=e.loggedInUser,n=e.logout;return Object(r.jsx)("header",{children:Object(r.jsxs)("section",{className:"main-layout flex j-between a-baseline",children:[Object(r.jsx)("div",{className:"logo",children:Object(r.jsx)(f.b,{to:"/",children:"Arter"})}),Object(r.jsxs)("nav",{className:"flex",children:[Object(r.jsx)(f.b,{to:"/explore",className:"link",children:Object(r.jsx)("h3",{children:"Explore"})}),Object(r.jsx)(f.b,{to:t?"/item/edit":"/login",className:"link",children:Object(r.jsx)("h3",{children:"Publish"})}),t?Object(r.jsxs)(B.a,{align:"end",menuButton:Object(r.jsx)("img",{src:t.imgUrls.profile,alt:""}),children:[Object(r.jsx)(B.c,{children:"Account"}),Object(r.jsxs)(B.d,{children:[Object(r.jsx)(F.a,{}),Object(r.jsx)(f.b,{to:"/user/".concat(t._id),children:"\xa0\xa0Profile"})]}),Object(r.jsx)(B.b,{}),Object(r.jsxs)(B.d,{children:[Object(r.jsx)(W.a,{}),Object(r.jsx)(f.b,{to:"/user/edit",children:"\xa0\xa0Edit Profile"})]}),Object(r.jsxs)(B.d,{onClick:n,children:[Object(r.jsx)(T.a,{}),Object(r.jsx)(f.b,{to:"/",children:"\xa0\xa0Logout"})]})]}):Object(r.jsx)(f.b,{to:"/login",children:Object(r.jsx)(z.a,{})})]})]})})}));function q(){return Object(r.jsx)("footer",{children:Object(r.jsxs)("div",{className:"content main-layout flex j-between a-center",children:[Object(r.jsxs)("section",{children:[Object(r.jsx)("div",{className:"logo",children:Object(r.jsx)(f.b,{to:"/",children:"Arter"})}),Object(r.jsx)("h3",{children:"is an online marketplace created with the artist in mind."}),Object(r.jsx)("h3",{children:"Our application gives artists, both amateur and professional,"}),Object(r.jsx)("h3",{children:"a social platform to share and sell their art with the world."})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("p",{children:"Meet the team"}),Object(r.jsxs)("div",{className:"flex col",children:[Object(r.jsxs)(f.b,{to:"/",className:"link flex a-center",children:[Object(r.jsx)("div",{className:"profile-img eran"}),Object(r.jsx)("h3",{children:"Eran Harel"})]}),Object(r.jsxs)(f.b,{to:"/",className:"link flex a-center",children:[Object(r.jsx)("div",{className:"profile-img ohad"}),Object(r.jsx)("h3",{children:"Ohad Avitan"})]}),Object(r.jsxs)(f.b,{to:"/",className:"link flex a-center",children:[Object(r.jsx)("div",{className:"profile-img tom"}),Object(r.jsx)("h3",{children:"Tom Lebeodkin"})]})]})]})]})})}var J=n(74);function Y(e){var t=e.user,n=e.tallMode;return Object(r.jsx)("section",{className:n?"user-preview":"user-preview min",children:Object(r.jsxs)(f.b,{to:"/user/".concat(t._id),children:[Object(r.jsx)("img",{src:t.imgUrls.profile,alt:""}),Object(r.jsx)("div",{className:"flex a-end",children:Object(r.jsx)("h3",{children:t.fullname})})]})})}var $=n(80),X=n.n($),K=n(269),Q=n(61),Z=n(107),ee=n(108),te=n(109),ne=n(110),re=n(111);n(113),n(114),n(115),n(116);function se(e){var t=e.users,n=e.items,s=e.tallMode;if(Q.a.use([Z.a,ee.a,te.a,ne.a,re.a]),!t||!t.length)return Object(r.jsx)("div",{});var a=function(e,t){var n=t.reduce((function(e,t,n){var r=t.seller._id;return e.includes(r)||e.push(r),e}),[]);return e.filter((function(e){return n.includes(e._id)}))}(t,n);return Object(r.jsx)("div",{className:"user-list",children:Object(r.jsx)(X.a,{spaceBetween:30,breakpoints:{500:{slidesPerView:2},800:{slidesPerView:3},1e3:{slidesPerView:4},1300:{slidesPerView:5}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},observer:!0,updateOnWindowResize:!0,autoplay:{delay:2500,disableOnInteraction:!1},onSwiper:function(e){return console.log(e)},onSlideChange:function(){return console.log("slide change")},children:a.map((function(e){return Object(r.jsx)(K.a,{children:Object(r.jsx)(Y,{user:e,tallMode:s})},e._id)}))})})}var ae=n(234),ce=n(139),ie=n.n(ce);function oe(e){var t=e.item,n=e.withProfile,a=e.minified,c=S.calcRate(t.seller);return a?Object(r.jsxs)("section",{className:"item-preview min",children:[Object(r.jsx)(f.b,{to:"/item/".concat(t._id),children:Object(r.jsx)("img",{className:"item-img min",src:t.imgUrl,alt:""})}),Object(r.jsxs)("div",{className:"item-info",children:[Object(r.jsxs)("div",{className:"flex j-between a-center",children:[Object(r.jsx)(f.b,{to:"/item/".concat(t._id),children:Object(r.jsx)("h3",{children:t.title})}),t.purchasedAt?Object(r.jsx)("p",{className:"site-clr3",children:"SOLD"}):Object(r.jsxs)("p",{children:["$",t.price]})]}),n&&Object(r.jsx)(f.b,{to:"/user/".concat(t.seller._id),className:"user-name",children:Object(r.jsx)("p",{children:t.seller.fullname})})]})]}):Object(r.jsxs)("section",{className:"item-preview",children:[Object(r.jsx)(f.b,{to:"/item/".concat(t._id),children:Object(r.jsx)("img",{className:"item-img",src:t.imgUrl,alt:""})}),Object(r.jsx)("div",{className:"flex j-between",children:Object(r.jsxs)("div",{className:"item-info",children:[n&&Object(r.jsx)("div",{className:"flex j-between",children:Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsx)(f.b,{to:"/user/".concat(t.seller._id),className:"user-name flex a-center",children:Object(r.jsx)("p",{children:t.seller.fullname})}),c&&Object(r.jsxs)(s.Fragment,{children:[Object(r.jsx)(ie.a,{color:"secondary",readOnly:!0,fontSize:"small"}),Object(r.jsx)("p",{className:"user-rating font-mont",children:c})]})]})}),Object(r.jsx)(f.b,{to:"/item/".concat(t._id),children:Object(r.jsx)("h3",{children:t.title})}),t.purchasedAt?Object(r.jsx)("p",{className:"site-clr3",children:"SOLD"}):Object(r.jsxs)("p",{className:"font-mont",children:["$",t.price]})]})})]})}var le=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).getRandomItems=function(e){return e.reduce((function(t,n,r){return n=e[S.getRandomInt(0,e.length)],!t.includes(n)&&!n.purchasedAt&&t.length<=3&&t.push(n),t}),[])},r.getLatestItems=function(e){return e.sort((function(e,t){return t.createdAt-e.createdAt})).filter((function(e,t){if(t<=3)return e}))},r.state={windowWidth:0,windowHeight:0},r.updateWindowDimensions=r.updateWindowDimensions.bind(Object(J.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({windowWidth:window.innerWidth,windowHeight:window.innerHeight})}},{key:"render",value:function(){var e=this.props,t=e.users,n=e.items,s=e.loggedInUser,a=this.state,c=a.windowWidth,i=(a.windowHeight,this.getRandomItems(n)),o=this.getLatestItems(n);return Object(r.jsxs)("section",{className:"home m-page",children:[Object(r.jsx)("div",{className:"hero",children:Object(r.jsxs)("div",{className:"hero-content main-layout flex j-center a-center",children:[Object(r.jsx)("h2",{children:"Find New Creations"}),Object(r.jsx)("h2",{children:"Get To Know The Artists"}),Object(r.jsx)("div",{className:"btn-cta",children:Object(r.jsx)(f.b,{to:"/explore",className:"link",children:Object(r.jsx)(ae.a,{variant:"outlined",style:{color:"white",borderColor:"white"},children:"Discover"})})})]})}),Object(r.jsxs)("main",{children:[Object(r.jsxs)("article",{className:"main-layout",children:[Object(r.jsx)("label",{children:"Hot Categories"}),Object(r.jsxs)("section",{className:"categories flex wrap j-between txt-center",children:[Object(r.jsx)("div",{className:"flex col",children:Object(r.jsxs)(f.b,{to:{pathname:"/explore",type:"Glass"},children:[Object(r.jsx)("div",{className:"flex a-center j-center",style:{backgroundImage:"url(https://res.cloudinary.com/arter/image/upload/v1611425886/Home%20topics/tiqlnoshz1qkpmjec3yi.jpg)"},children:c<1300&&Object(r.jsx)("h5",{children:"Glasswork"})}),c>1300&&Object(r.jsx)("h5",{children:"Glasswork"})]})}),Object(r.jsx)("div",{className:"flex col",children:Object(r.jsxs)(f.b,{to:{pathname:"/explore",type:"Wood"},children:[Object(r.jsx)("div",{className:"flex a-center j-center",style:{backgroundImage:"url(https://res.cloudinary.com/arter/image/upload/v1611431953/Home%20topics/kpdnlxgr5sczqeo9sfom.jpg)"},children:c<1300&&Object(r.jsx)("h5",{children:"Woodwork"})}),c>1300&&Object(r.jsx)("h5",{children:"Woodwork"})]})}),Object(r.jsx)("div",{className:"flex col",children:Object(r.jsxs)(f.b,{to:{pathname:"/explore",type:"Painting"},children:[Object(r.jsx)("div",{className:"flex a-center j-center",style:{backgroundImage:"url(https://res.cloudinary.com/arter/image/upload/v1610825845/Home%20topics/painting1_fvloac.jpg)"},children:c<1300&&Object(r.jsx)("h5",{children:"Paintings"})}),c>1300&&Object(r.jsx)("h5",{children:"Paintings"})]})}),Object(r.jsx)("div",{className:"flex col",children:Object(r.jsxs)(f.b,{to:{pathname:"/explore",type:"Jewelry"},children:[Object(r.jsx)("div",{className:"flex a-center j-center",style:{backgroundImage:"url(https://res.cloudinary.com/arter/image/upload/v1610825888/Home%20topics/jewlery_ifguvi.jpg)"},children:c<1300&&Object(r.jsx)("h5",{children:"Jewelry"})}),c>1300&&Object(r.jsx)("h5",{children:"Jewelry"})]})}),Object(r.jsx)("div",{className:"flex col",children:Object(r.jsxs)(f.b,{to:{pathname:"/explore",type:"Crafts"},children:[Object(r.jsx)("div",{className:"flex a-center j-center",style:{backgroundImage:"url(https://res.cloudinary.com/arter/image/upload/v1610826083/Home%20topics/origami-crafts_yx7ejc.jpg)"},children:c<1300&&Object(r.jsx)("h5",{children:"Crafts"})}),c>1300&&Object(r.jsx)("h5",{children:"Crafts"})]})})]})]}),Object(r.jsxs)("article",{className:"main-layout",children:[Object(r.jsxs)("div",{className:"flex j-between a-center",children:[Object(r.jsx)("label",{children:"Latest Works"}),Object(r.jsx)(f.b,{to:"/explore",className:"see-more",children:"See More..."})]}),Object(r.jsx)("div",{className:"latest-works flex j-between wrap",children:o.map((function(e){return Object(r.jsx)(oe,{item:e,minified:!0,withProfile:!0},e._id)}))})]}),Object(r.jsx)("article",{className:"our-services",children:Object(r.jsxs)("article",{className:"our-services-container main-layout flex j-center a-center",children:[Object(r.jsx)("h2",{children:"Join The Family"}),Object(r.jsx)("h2",{children:"Share Your Arts"}),Object(r.jsx)("div",{className:"btn-cta",children:Object(r.jsx)(f.b,{to:s?"/item/edit":"/login",children:Object(r.jsx)(ae.a,{variant:"outlined",style:{backgroundColor:"#13acca",color:"white"},children:"Publish Now"})})})]})}),Object(r.jsxs)("article",{className:"main-layout",children:[Object(r.jsxs)("div",{className:"flex j-between a-center",children:[Object(r.jsx)("label",{children:"Our Experts Choices"}),Object(r.jsx)(f.b,{to:"/explore",className:"see-more",children:"See More..."})]}),Object(r.jsx)("div",{className:"featured-creations flex j-between wrap",children:i.map((function(e){return Object(r.jsx)(oe,{item:e,minified:!0,withProfile:!0},e._id)}))})]}),Object(r.jsxs)("article",{className:"main-layout",children:[Object(r.jsx)("label",{children:"Top Artists"}),Object(r.jsx)(se,{users:t,items:n,tallMode:!0})]})]})]})}}]),n}(s.Component),ue=Object(m.b)((function(e){return{loggedInUser:e.userModule.loggedInUser,users:e.userModule.users,items:e.itemModule.items}}))(le),de=n(95),je=n.n(de);function he(e){var t=e.items,n=e.minified,s=e.withProfile;return t.length?Object(r.jsx)(de.ResponsiveMasonry,{columnsCountBreakPoints:{450:1,700:2,1e3:3},children:Object(r.jsx)(je.a,{gutter:"30px",children:t.map((function(e){return Object(r.jsx)(oe,{item:e,withProfile:s,minified:n},e._id)}))})}):Object(r.jsx)("div",{className:"item-list main-layout",children:Object(r.jsx)("p",{className:"no-items-txt muted",children:"No items found..."})})}var pe={add:function(e){return w("item",e)},update:function(e){return y("item/".concat(e._id),e)},query:function(e){var t=e?"?txt=".concat(e):"";return g("item".concat(t))},save:function(e){return e._id?y("item/".concat(e._id),e):w("item/",e)},remove:function(e){return N("item/".concat(e))},getById:function(e){return g("item/".concat(e))}};function me(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe.query(e);case 3:return r=t.sent,e||n({type:"SET_ITEMS",items:r}),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),console.log("itemActions:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}var be=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={txt:e.props.initialFilter||""},e.handleChange=function(t){var n=t.target.value;e.setState({txt:n},(function(){return e.props.onFilter(e.state.txt)}))},e.onSubmit=function(e){return e.preventDefault()},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.onFilter(this.state.txt)}},{key:"render",value:function(){var e=this.state.txt;return Object(r.jsx)("section",{className:"app-filter",children:Object(r.jsx)("form",{className:"filter-form",onSubmit:this.onSubmit,children:Object(r.jsx)("input",{className:"search-bar",placeholder:"Search",type:"text",autoComplete:"off",name:"txt",value:e,onChange:this.handleChange})})})}}]),n}(s.Component),fe={loadItems:me},xe=Object(m.b)((function(e){return{items:e.itemModule.items}}),fe)(be),Oe=n(54),ve=n.n(Oe),ge=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={items:[],txt:""},e.onFilter=function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadItems(n);case 2:r=t.sent,e.setState({items:r,txt:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.setState({items:this.props.items})}},{key:"render",value:function(){var e=this.props.users,t=this.state,n=t.items,s=t.txt;return Object(r.jsxs)("section",{className:"explore m-page main-layout",children:[Object(r.jsx)(xe,{initialFilter:this.props.location.type,onFilter:this.onFilter}),Object(r.jsx)("p",{children:"Top Artists"}),Object(r.jsx)(se,{users:e,items:this.props.items}),Object(r.jsxs)("p",{className:s?"visible":"hidden",children:["Results for ",s]}),Object(r.jsx)(he,{users:e,items:n,withProfile:!0})]})}}]),n}(s.Component),we={loadItems:me},ye=Object(m.b)((function(e){return{users:e.userModule.users,items:e.itemModule.items}}),we)(ge),Ne=n(5),Ie=n(270);function ke(e){var t=e.review;return Object(r.jsxs)("article",{className:"review-preview",children:[Object(r.jsxs)(f.b,{to:"/user/".concat(t.byUser._id),className:"reviewer-info flex a-center",children:[Object(r.jsx)("img",{src:t.byUser.imgUrl,alt:""}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:t.byUser.fullname}),Object(r.jsx)("small",{className:"muted",children:new Date(t.createdAt).toLocaleDateString("en-US")})]})]}),Object(r.jsx)(Ie.a,{value:t.rate,readOnly:!0,size:"small"}),Object(r.jsx)("p",{children:t.txt})]})}function Se(e){var t=e.reviews;return Object(r.jsx)("section",{className:"review-list",children:t.length?t.map((function(e){return Object(r.jsx)(ke,{review:e},e.id)})):Object(r.jsx)("p",{className:"muted",children:"No reviews yet..."})})}var _e={add:function(e){return console.log("orderService: (ADD)"),w("order/",e)},update:function(e){return y("order/".concat(e._id),e)},query:function(e){var t=e?"?tags_like=".concat(e):"";return g("order/".concat(t))},getById:function(e){return g("order/".concat(e))}};function Ue(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.query(e);case 3:r=t.sent,n({type:"SET_ORDERS",orders:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("orderActions:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var Ce=n(28),Ee=n(265),Me=n(268),De=n(141),Ae=n.n(De),Re=n(140),Te=n.n(Re);function Pe(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -",50,"%)"),borderColor:"darkgray",borderRadius:"".concat(5,"px")}}var Fe=Object(Ee.a)((function(e){return{paper:{position:"absolute",width:430,backgroundColor:e.palette.background.paper,border:"1px solid #000",boxShadow:e.shadows[5],borderRadius:"".concat(2,"px"),padding:e.spacing(2,4,3)}}}));var Le=Object(m.b)((function(e){return{loggedInUser:e.userModule.loggedInUser}}))((function(e){var t=e.onAdd,n=e.currUser,s=e.loggedInUser,c=Fe(),i=a.a.useState(Pe),o=Object(Ce.a)(i,1)[0],l=a.a.useState(!1),u=Object(Ce.a)(l,2),d=u[0],j=u[1],h=a.a.useState(5),p=Object(Ce.a)(h,2),m=p[0],b=p[1],f=a.a.createRef(),x=function(){return j(!1)},O=Object(r.jsxs)("div",{style:o,className:c.paper,children:[Object(r.jsxs)("div",{className:"flex j-between",children:[Object(r.jsx)("h3",{children:"Add Review"}),Object(r.jsx)(Ie.a,{name:"rating",value:m,onChange:function(e,t){t&&b(t)}})]}),Object(r.jsx)("p",{children:"Let your voice be heard"}),Object(r.jsx)("textarea",{autoFocus:!0,ref:f}),Object(r.jsxs)("div",{className:"btns-container right",children:[Object(r.jsx)(ae.a,{onClick:x,children:"Close"}),Object(r.jsx)(ae.a,{variant:"contained",style:{backgroundColor:"#13acca",color:"white"},onClick:function(){t(f.current.value,m),x()},endIcon:Object(r.jsx)(Te.a,{}),children:"Post"})]})]});return Object(r.jsxs)("div",{children:[Object(r.jsx)(Ae.a,{className:s&&s._id===n._id?"add-btn pointer disabled":"add-btn pointer",onClick:function(){if(!s)return window.location.href="#/login";s._id!==n._id&&j(!0)},fontSize:"large"}),Object(r.jsx)(Me.a,{className:"review-add-modal",open:d,onClose:x,children:O})]})})),We=n(266),He=n(142),ze=n.n(He),Be=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={user:null,items:[]},e.onAddReview=function(t,n){var r=e.props.loggedInUser,s=e.state.user,a=s.reviews,c={id:S.makeId(),createdAt:Date.now(),txt:t,rate:n,byUser:{_id:r._id,fullname:r.fullname,imgUrl:r.imgUrls.profile}};a.unshift(c),s=Object(Ne.a)(Object(Ne.a)({},s),{},{reviews:a}),e.props.editUser(s)},e.loadUser=Object(u.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,t.next=3,_.getById(n);case 3:r=t.sent,e.setState({user:r});case 5:case"end":return t.stop()}}),t)}))),e.getItemsForDisplay=Object(u.a)(l.a.mark((function t(){var n,r,s,a,c=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=c.length>0&&void 0!==c[0]?c[0]:"all",r=e.props.match.params.id,s=e.props.items,t.t0=n,t.next="all"===t.t0?6:"sold"===t.t0?8:"forSale"===t.t0?10:12;break;case 6:return a=s.filter((function(e){return r===e.seller._id})),t.abrupt("break",12);case 8:return a=s.filter((function(e){return r===e.seller._id&&e.purchasedAt})),t.abrupt("break",12);case 10:return a=s.filter((function(e){return r===e.seller._id&&!e.purchasedAt})),t.abrupt("break",12);case 12:e.setState({items:a});case 13:case"end":return t.stop()}}),t)}))),e.getSoldItems=function(){var t=e.state.user,n=e.props.orders;if(n.length&&t)return n.filter((function(e){if(e.seller._id===t._id)return e}))},e.getBoughtItems=function(){var t=e.state.user,n=e.props.orders;if(n.length&&t)return n.filter((function(e){if(e.buyer._id===t._id)return e}))},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.loadOrders(),this.loadUser(),this.getItemsForDisplay(),window.scrollTo(0,0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.match.params.id!==t.match.params.id&&(window.location.reload(),this.props.loadOrders(),this.loadUser(),this.getItemsForDisplay(),window.scrollTo(0,0));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalMoneyEarned",value:function(){var e=this.getSoldItems();console.log(e);var t=0;return e&&e.map((function(e){return t+=e.item.price})),t}},{key:"sidenavContent",value:function(e){var t=this.state.user,n=this.props.loggedInUser,a=this.getSoldItems(),c=this.getBoughtItems();return Object(r.jsxs)("aside",{className:"normal"===e?"sidebar":"sidebar mobile",children:[n&&n._id===t._id&&Object(r.jsx)(f.b,{to:"/user/edit/".concat(t._id),children:Object(r.jsx)("button",{className:"custom-order-btn",children:"Edit Profile"})}),n&&n._id===t._id&&Object(r.jsx)("button",{className:"custom-order-btn",children:"Notifications"}),Object(r.jsx)("button",{className:"custom-order-btn",children:"Custom Order"}),Object(r.jsx)("button",{className:"custom-order-btn",children:"Contact Me"}),Object(r.jsx)("button",{className:"custom-order-btn",children:"Favourites"}),n&&n._id===t._id&&Object(r.jsxs)(s.Fragment,{children:[Object(r.jsxs)("ul",{children:[Object(r.jsx)("h4",{children:"Items Bought"}),c.length?c.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("a",{href:"#/item/".concat(e.item._id),children:e.item.title}),", bought from ",Object(r.jsx)("a",{href:"#/user/".concat(e.seller._id),children:e.seller.fullname}),Object(r.jsxs)("p",{className:"muted",children:["Shipping Status: ",e.shippingStatus]})]},e._id)})):Object(r.jsx)("p",{className:"muted",children:"Nothing bought yet..."})]}),Object(r.jsx)("div",{className:"border-bottom"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("h4",{children:"Items Sold"}),a.length?a.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("a",{href:"#/item/".concat(e.item._id),children:e.item.title}),", bought by ",Object(r.jsx)("a",{href:"#/user/".concat(e.buyer._id),children:e.buyer.fullname}),Object(r.jsxs)("p",{className:"muted",children:["Shipping Status: ",e.shippingStatus]})]},e._id)})):Object(r.jsx)("p",{className:"muted",children:"Nothing sold yet..."})]}),Object(r.jsx)("div",{className:"border-bottom"}),Object(r.jsxs)("p",{children:["Total earnings: $",this.getTotalMoneyEarned()]})]})]})}},{key:"render",value:function(){var e=this,t=this.state,n=t.user,s=t.items,a=this.props.loggedInUser,c=S.calcRate(n)||0;return n?Object(r.jsxs)("section",{className:"user-details main-layout m-page",children:[Object(r.jsxs)("div",{className:"profile-header",children:[Object(r.jsx)("img",{className:"banner-img",src:n.imgUrls.banner,alt:"",onClick:function(){return a&&a._id===n._id&&console.log("THIS IS MY BANNER")}}),Object(r.jsx)("img",{className:"profile-img",src:n.imgUrls.profile,alt:n.fullname,onClick:function(){return a&&a._id===n._id&&console.log("THIS IS MY PROFILE")}})]}),Object(r.jsxs)("div",{className:"content flex",children:[this.sidenavContent("normal"),Object(r.jsxs)("div",{className:"main",children:[Object(r.jsxs)("div",{className:"about-user",children:[Object(r.jsxs)("div",{className:"flex j-between a-center",children:[Object(r.jsx)("h1",{children:n.fullname}),Object(r.jsxs)("div",{className:"mobile-sidebar",children:[Object(r.jsxs)("div",{className:"contact-btns-mobile flex a-center",children:[Object(r.jsx)("p",{className:"site-clr3",children:"Custom Order"}),Object(r.jsx)("p",{className:"site-clr1",children:"Contact Me"}),Object(r.jsx)("label",{htmlFor:"mobile-sidebar-checkbox",children:Object(r.jsx)(ze.a,{className:"pointer"})})]}),Object(r.jsx)("input",{type:"checkbox",id:"mobile-sidebar-checkbox",className:"d-none"}),Object(r.jsx)("nav",{className:"d-none",children:this.sidenavContent("mobile")})]})]}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{className:"desc-txt",children:n.description})]}),Object(r.jsxs)("div",{className:"portfolio-container flex a-center j-between",children:[Object(r.jsx)("h3",{children:"Portfolio"}),Object(r.jsxs)(We.a,{variant:"text",size:"small",children:[Object(r.jsx)(ae.a,{onClick:function(){return e.getItemsForDisplay("all")},children:"All"}),Object(r.jsx)(ae.a,{onClick:function(){return e.getItemsForDisplay("sold")},children:"Sold"}),Object(r.jsx)(ae.a,{onClick:function(){return e.getItemsForDisplay("forSale")},children:"For Sale"})]})]}),Object(r.jsx)(he,{items:s}),Object(r.jsxs)("div",{className:"review-container flex a-center j-between",children:[Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsx)("h3",{children:"Reviews"}),Object(r.jsx)(Ie.a,{name:"rating",value:c,readOnly:!0}),Object(r.jsxs)("p",{className:"muted font-mont rate-num",children:["(",n.reviews.length,")"]})]}),Object(r.jsx)(Le,{onAdd:this.onAddReview,currUser:n})]}),Object(r.jsx)(Se,{reviews:n.reviews})]})]})]}):Object(r.jsx)("div",{className:"loader-container",children:Object(r.jsx)("div",{className:"loader m-page"})})}}]),n}(s.Component),Ve={editUser:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.save(e);case 3:r=t.sent,console.log("editeduUser:",r),n({type:"EDIT_USER",user:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("UserActions: err in addReview",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},loadOrders:Ue},Ge=Object(m.b)((function(e){return{loggedInUser:e.userModule.loggedInUser,items:e.itemModule.items,orders:e.orderModule.orders}}),Ve)(Be),qe=n(40),Je=n(143),Ye=n.n(Je),$e=function(){var e;return{setup:function(){e=Ye()("")},on:function(t,n){e.on(t,n)},off:function(t,n){e.off(t,n)},emit:function(t,n){e.emit(t,n)},terminate:function(){e=null}}}();window.socketService=$e;var Xe=n(82),Ke=n.n(Xe),Qe=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={item:null,otherItems:[]},e.onPurchase=Object(u.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.loggedInUser||e.props.history.push("/login"),n=e.state.item,console.log(n),t.prev=3,t.next=6,e.props.addOrder(n);case 6:return r=t.sent,console.log(r),console.log("SUCCESS !"),$e.emit("ORDER_OUT",r),e.setState({item:r.item}),t.abrupt("return",ve()({className:"swal",title:"Purchase completed!",text:"You can view your purchase details in your profile page",timer:6e3}));case 14:return t.prev=14,t.t0=t.catch(3),console.log("Purchase Failed"),t.abrupt("return",ve()({className:"swal",title:"Oops!",text:"There was a problem with the purchase process.",timer:6e3}));case 18:case"end":return t.stop()}}),t,null,[[3,14]])}))),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q.a.use([Z.a,ee.a,te.a,ne.a,re.a]),this.loadOtherItems(),window.scrollTo(0,0);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.match.params.id!==t.match.params.id&&(this.loadOtherItems(),window.scrollTo(0,0));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadOtherItems",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,n=this.props.items,e.next=4,pe.getById(t);case 4:r=e.sent,s=n.filter((function(e){return r.sellerId===e.seller._id&&r._id!==e._id})),this.setState({item:r,otherItems:s});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.item,s=t.otherItems,a=this.props.loggedInUser;if(!n||!this.props.users.length)return Object(r.jsx)("div",{className:"loader-container",children:Object(r.jsx)("div",{className:"loader m-page"})});var c=this.props.users.find((function(e){return n.sellerId===e._id})),i=S.calcRate(c);return console.log(c._id===n.sellerId),Object(r.jsxs)("section",{className:"item-details m-page",children:[Object(r.jsxs)("div",{className:"main-layout flex col",children:[Object(r.jsx)("h1",{children:n.title}),Object(r.jsxs)("div",{className:"item-container flex",children:[Object(r.jsx)("img",{className:"item-img",src:n.imgUrl,alt:n.title}),Object(r.jsxs)("div",{className:"item-desc flex col",children:[Object(r.jsxs)("div",{className:"flex j-between",children:[Object(r.jsx)("h2",{children:"About this piece"}),a&&a._id===n.sellerId&&Object(r.jsx)(f.b,{to:"/item/edit/".concat(n._id),children:Object(r.jsx)(W.a,{})})]}),Object(r.jsx)("p",{className:"desc-txt",children:n.description}),Object(r.jsxs)("p",{className:"size-txt",children:["Size:\xa0\xa0",n.size]}),Object(r.jsx)("div",{className:"tags flex",children:n.tags.map((function(e,t){return Object(r.jsxs)("small",{children:["#",Object(r.jsx)(f.b,{to:{pathname:"/explore",type:e},children:e}),"\xa0\xa0\xa0"]},t)}))}),n.purchasedAt?Object(r.jsx)("p",{className:"site-clr3",children:"SOLD"}):Object(r.jsxs)("p",{children:["$",n.price]}),Object(r.jsxs)("div",{className:"flex col j-between grow",children:[Object(r.jsx)("div",{className:"profile-container flex a-center",children:Object(r.jsxs)(f.b,{to:"/user/".concat(n.sellerId),className:"flex a-center",children:[Object(r.jsx)("img",{src:c.imgUrls.profile,alt:c.fullname}),Object(r.jsxs)("div",{className:"flex col",children:[Object(r.jsx)("h4",{children:c.fullname}),Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsx)(Ie.a,{name:"rating",value:i,readOnly:!0,size:"small"}),Object(r.jsxs)("p",{className:"muted font-mont",children:["(",c.reviews.length,")"]})]})]})]})}),Object(r.jsxs)("div",{className:"check-marks flex col muted",children:[Object(r.jsxs)("div",{className:"flex a-center",children:[Object(r.jsx)(Ke.a,{fontSize:"small"}),"Express Shipping"]}),Object(r.jsxs)("div",{className:"flex a-center",children:[Object(r.jsx)(Ke.a,{fontSize:"small"}),"Certificate of Authenticity included"]}),Object(r.jsxs)("div",{className:"flex a-center",children:[Object(r.jsx)(Ke.a,{fontSize:"small"}),"Returns Accepted 14 days"]})]}),Object(r.jsx)("button",{className:"purchase-btn font-mont",disabled:a&&a._id===n.sellerId||n.purchasedAt,onClick:a&&a._id!==n.sellerId?this.onPurchase:function(){return e.props.history.push("/login")},children:"Purchase"})]})]})]})]}),Object(r.jsx)("div",{className:"other-works",children:Object(r.jsxs)("div",{className:"main-layout",children:[Object(r.jsxs)("h3",{children:["Other Works By ",c.fullname,":"]}),s.length?Object(r.jsx)(X.a,{spaceBetween:80,breakpoints:{580:{slidesPerView:2},860:{slidesPerView:3},1300:{slidesPerView:4}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},observer:!0,updateOnWindowResize:!0,autoplay:{delay:2500,disableOnInteraction:!1},onSwiper:function(e){return console.log(e)},onSlideChange:function(){return console.log("slide change")},children:s.map((function(e){return Object(r.jsx)(K.a,{children:Object(r.jsx)(oe,{item:e,user:c,minified:!0})},e._id)}))}):Object(r.jsx)("p",{className:"muted",children:"No works yet..."})]})})]})}}]),n}(s.Component),Ze={loadItems:me,addOrder:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("orderActions: (ADD)"),t.next=4,_e.add(e);case 4:return r=t.sent,n({type:"ADD_ORDER",order:r}),t.abrupt("return",r);case 9:throw t.prev=9,t.t0=t.catch(0),console.log("orderActions:",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}},et=Object(m.b)((function(e){return{loggedInUser:e.userModule.loggedInUser,items:e.itemModule.items,users:e.userModule.users}}),Ze)(Qe),tt=n(37),nt=n(267),rt=n(146),st=n.n(rt),at=n(144),ct=n.n(at),it=n(145),ot=n.n(it),lt=n(147),ut=n.n(lt),dt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={currPage:"/login",msg:"",loginCred:{email:"",password:""},signupCred:{password:"",fullname:"",email:""}},e.loginHandleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState((function(e){return{loginCred:Object(Ne.a)(Object(Ne.a)({},e.loginCred),{},Object(tt.a)({},r,s))}}))},e.signupHandleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState((function(e){return{signupCred:Object(Ne.a)(Object(Ne.a)({},e.signupCred),{},Object(tt.a)({},r,s))}}))},e.doLogin=function(){var t=Object(u.a)(l.a.mark((function t(n){var r,s,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state.loginCred,s=r.email,a=r.password,s&&a){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:return c={email:s,password:a},t.prev=5,t.next=8,e.props.login(c);case 8:e.setState({loginCred:{email:"",password:""}}),sessionStorage.loggedInUser&&($e.emit("LOGIN",e.props.loggedInUser),e.props.history.push("/")),t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(5),t.next=16,e.setState({msg:"Login failed, try again."});case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(u.a)(l.a.mark((function t(n){var r,s,a,c,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state.signupCred,s=r.email,a=r.password,c=r.firstName,i=r.lastName,s&&a&&c&&i&&s){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required"}));case 4:return c=c.charAt(0).toUpperCase()+c.slice(1),i=i.charAt(0).toUpperCase()+i.slice(1),o={email:s,password:a,fullname:c+" "+i},t.next=10,e.props.signup(o);case 10:e.setState({signupCred:{email:"",password:"",fullname:""}}),sessionStorage.loggedInUser&&e.props.history.push("/");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.setState({currPage:this.props.match.path})}},{key:"render",value:function(){var e=this,t=this.props.loggedInUser,n=Object(r.jsxs)("form",{className:"frm-signup flex col",onSubmit:this.doSignup,children:[Object(r.jsx)("h2",{children:"Create Account"}),Object(r.jsx)(nt.a,{type:"text",color:"secondary",name:"email",value:this.state.signupCred.email,onChange:this.signupHandleChange,label:"Email"}),Object(r.jsx)(nt.a,{type:"text",color:"secondary",name:"firstName",value:this.state.signupCred.firstName,onChange:this.signupHandleChange,label:"First Name"}),Object(r.jsx)(nt.a,{type:"text",color:"secondary",name:"lastName",value:this.state.signupCred.lastName,onChange:this.signupHandleChange,label:"Last Name"}),Object(r.jsx)(nt.a,{type:"password",name:"password",color:"secondary",value:this.state.signupCred.password,onChange:this.signupHandleChange,label:"Password"}),Object(r.jsx)(ae.a,{className:"signup-btn",type:"submit",color:"secondary",variant:"contained",children:"SIGN UP"})]}),s=Object(r.jsxs)("form",{className:"frm-login flex col",onSubmit:this.doLogin,children:[Object(r.jsx)("h2",{children:"Sign In"}),Object(r.jsx)(nt.a,{type:"text",name:"email",value:this.state.loginCred.email,onChange:this.loginHandleChange,label:"Email"}),Object(r.jsx)(nt.a,{type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,label:"Password"}),Object(r.jsx)(ae.a,{className:"login-btn",type:"submit",variant:"contained",children:"SIGN IN"}),Object(r.jsxs)("div",{className:"filler-logos flex j-between",children:[Object(r.jsx)(ct.a,{}),Object(r.jsx)(ot.a,{}),Object(r.jsx)(st.a,{}),Object(r.jsx)(ut.a,{})]})]}),a=this.state.msg,c=this.state.currPage;return Object(r.jsx)("div",{className:"flex j-center",children:Object(r.jsxs)("div",{className:"login-signup",children:[t&&Object(r.jsx)("div",{children:Object(r.jsxs)("h3",{children:["Welcome ",t.fullname,Object(r.jsx)(ae.a,{color:"secondary",onClick:this.props.logout,children:"LOGOUT"})]})}),Object(r.jsxs)("div",{className:"btn-group flex",children:[Object(r.jsx)(f.b,{to:"/login",className:"link",children:Object(r.jsx)(ae.a,{style:{color:"#13acca",fontWeight:"bold"},onClick:function(){e.setState({currPage:"/login"})},children:"Login"})}),Object(r.jsx)(f.b,{to:"/signup",className:"link",children:Object(r.jsx)(ae.a,{style:{fontWeight:"bold"},color:"secondary",onClick:function(){e.setState({currPage:"/signup"})},children:"Signup"})})]}),Object(r.jsx)("p",{className:"muted red",children:a?"* "+a:""}),Object(r.jsx)("div",{className:"lock-icon-div flex j-center",children:Object(r.jsx)(z.a,{fontSize:"large",className:"/login"===c?"site-clr1":"site-clr3"})}),!t&&"/login"===c&&s,!t&&"/signup"===c&&n]})})}}]),n}(s.Component),jt={login:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.login(e);case 3:r=t.sent,n({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},logout:A,signup:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.signup(e);case 3:r=t.sent,n({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in signup",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeUser:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.remove(e);case 3:n({type:"REMOVE_USER",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:D},ht=Object(m.b)((function(e){return{users:e.userModule.users,loggedInUser:e.userModule.loggedInUser}}),jt)(dt),pt={uploadImg:function(e){return mt.apply(this,arguments)}};function mt(){return(mt=Object(u.a)(l.a.mark((function e(t){var n,r,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"arter",n="https://api.cloudinary.com/v1_1/".concat("arter","/image/upload"),(r=new FormData).append("file",t),r.append("upload_preset","arter-preset"),e.prev=5,e.next=8,fetch(n,{method:"POST",body:r});case 8:return s=e.sent,e.next=11,s.json();case 11:return a=e.sent,e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}var bt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isUploading:!1},e.onUploadImg=function(){var t=Object(u.a)(l.a.mark((function t(n){var r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploading:!0}),t.next=3,pt.uploadImg(n.target.files[0]);case 3:r=t.sent,s=r.secure_url,e.setState({isUploading:!1},(function(){return e.props.onFinishUpload(s)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state.isUploading;return Object(r.jsxs)("div",{className:"uploader",children:[Object(r.jsx)("label",{htmlFor:"imageUploader",children:e?"Uploading....":"Upload Image"}),Object(r.jsx)("input",{onChange:this.onUploadImg,hidden:!0,type:"file",accept:"image/*",id:"imageUploader"})]})}}]),n}(s.Component),ft=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={item:{title:"",price:0,description:"",imgUrl:""}},e.onUploadImg=function(t){e.setState((function(e){return{item:Object(Ne.a)(Object(Ne.a)({},e.item),{},{imgUrl:t})}})),console.log("img url",t)},e.handleInput=function(t){var n=t.target,r=n.name,s=n.value;s="price"===r?+s:s,"price"===r&&s<0||e.setState((function(e){return{item:Object(Ne.a)(Object(Ne.a)({},e.item),{},Object(tt.a)({},r,s))}}))},e.onRemoveItem=function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.item,t.next=3,e.props.removeItem(n);case 3:e.props.history.push("/user/".concat(r.seller._id));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveItem=function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(r=e.state.item)._id){t.next=8;break}return t.next=5,e.props.editItem(r);case 5:e.props.history.push("/item/".concat(r._id)),t.next=11;break;case 8:return t.next=10,e.props.addItem(r);case 10:e.props.history.push("/user/".concat(r.seller._id));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0),(t=this.props.match.params.id)&&(n=this.props.items.find((function(e){return e._id===t})),this.setState({item:n}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.item;return t?Object(r.jsx)("div",{className:"item-edit m-page",children:Object(r.jsxs)("form",{className:"flex col j-between",autoComplete:"off",onSubmit:this.onSaveItem,children:[Object(r.jsx)(nt.a,{id:"standard-secondary",label:"Name",type:"text",name:"title",value:t.title,placeholder:"Title",color:"secondary",onChange:this.handleInput}),Object(r.jsx)(nt.a,{label:"Price",type:"number",value:t.price,onChange:this.handleInput,name:"price"}),Object(r.jsx)("textarea",{label:"Description",type:"text",value:t.description,onChange:this.handleInput,name:"description"}),Object(r.jsx)(bt,{onFinishUpload:this.onUploadImg}),Object(r.jsxs)("div",{children:[t._id&&Object(r.jsx)(ae.a,{type:"button",onClick:function(){return e.onRemoveItem(t._id)},children:"Delete Item"}),Object(r.jsx)(ae.a,{type:"submit",children:"Save"})]})]})}):Object(r.jsx)("div",{className:"loader m-page"})}}]),n}(s.Component),xt={loadItems:me,addItem:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe.add(e);case 3:r=t.sent,n({type:"ADD_ITEM",item:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("itemActions:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},editItem:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe.update(e);case 3:r=t.sent,n({type:"EDIT_ITEM",item:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("itemActions:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeItem:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe.remove(e);case 3:n({type:"REMOVE_ITEM",itemId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("itemActions:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}},Ot=Object(m.b)((function(e){return{loggedInUser:e.userModule.loggedInUser,users:e.userModule.users,items:e.itemModule.items}}),xt)(ft),vt=n(148),gt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onOrderIn=function(e){return ve()(Object(r.jsxs)("div",{className:"swal",children:[Object(r.jsx)("h1",{children:"Hey there!"}),Object(r.jsxs)("p",{children:[Object(r.jsx)("a",{className:"site-clr1",href:"#/user/".concat(e.buyer._id),children:e.buyer.fullname})," has just bought ",Object(r.jsx)("a",{className:"site-clr1",href:"#/item/".concat(e.item._id),children:e.item.title})," from you!"]}),Object(r.jsxs)("p",{children:["You can view your sold items details in your ",Object(r.jsx)("a",{className:"site-clr1",href:"#/user/".concat(e.seller._id),children:" Profile Page."})]})]}))},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadItems();case 2:return e.next=4,this.props.loadUsers();case 4:return e.next=6,this.props.loadOrders();case 6:$e.setup(),$e.on("ORDER_IN",this.onOrderIn);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){$e.terminate()}},{key:"render",value:function(){var e=this.props,t=e.users,n=e.items,s=e.orders;return Object(r.jsxs)("main",{children:[Object(r.jsx)(G,{}),(null===n||void 0===n?void 0:n.length)&&(null===t||void 0===t?void 0:t.length)&&(null===s||void 0===s?void 0:s.length)?Object(r.jsxs)(b.c,{children:[Object(r.jsx)(b.a,{path:"/signup",component:ht}),Object(r.jsx)(b.a,{path:"/login",component:ht}),Object(r.jsx)(b.a,{path:"/item/edit/:id?",component:Ot}),Object(r.jsx)(b.a,{path:"/item/:id",component:et}),Object(r.jsx)(b.a,{path:"/user/edit/:id?",component:vt.UserEdit}),Object(r.jsx)(b.a,{path:"/user/:id",component:Ge}),Object(r.jsx)(b.a,{path:"/explore",component:ye}),Object(r.jsx)(b.a,{path:"/",component:ue})]}):"",Object(r.jsx)(q,{})]})}}]),n}(s.Component),wt={loadItems:me,loadUsers:D,loadOrders:Ue},yt=Object(m.b)((function(e){return{items:e.itemModule.items,users:e.userModule.users,orders:e.orderModule.orders}}),wt)(gt),Nt=n(43),It=n(149),kt={items:[]};var St=null;sessionStorage.loggedInUser&&(St=JSON.parse(sessionStorage.loggedInUser));var _t={loggedInUser:St,users:[]};var Ut={orders:[]};var Ct=Object(Nt.c)({itemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ITEMS":return Object(Ne.a)(Object(Ne.a)({},e),{},{items:t.items});case"EDIT_ITEM":return Object(Ne.a)(Object(Ne.a)({},e),{},{items:e.items.map((function(e){return e._id===t.item._id?t.item:e}))});case"ADD_ITEM":return Object(Ne.a)(Object(Ne.a)({},e),{},{items:[].concat(Object(qe.a)(e.items),[t.item])});case"REMOVE_ITEM":return Object(Ne.a)(Object(Ne.a)({},e),{},{items:e.items.filter((function(e){return e._id!==t.itemId}))});default:return e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(Ne.a)(Object(Ne.a)({},e),{},{loggedInUser:t.user});case"REMOVE_USER":return Object(Ne.a)(Object(Ne.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(Ne.a)(Object(Ne.a)({},e),{},{users:t.users});case"EDIT_USER":return console.log("editAction:",t),Object(Ne.a)(Object(Ne.a)({},e),{},{users:e.users.map((function(e){return e._id===t.user._id?t.user:e}))});case"REMOVE_REVIEW":return;default:return e}},orderModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ORDERS":return Object(Ne.a)(Object(Ne.a)({},e),{},{orders:t.orders});case"EDIT_ORDER":return Object(Ne.a)(Object(Ne.a)({},e),{},{orders:e.orders.map((function(e){return e._id===t.order._id?t.order:e}))});case"ADD_ORDER":return Object(Ne.a)(Object(Ne.a)({},e),{},{orders:[].concat(Object(qe.a)(e.orders),[t.order])});case"REMOVE_ORDER":return Object(Ne.a)(Object(Ne.a)({},e),{},{orders:e.orders.filter((function(e){return e._id!==t.orderId}))});default:return e}}}),Et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Nt.d,Mt=Object(Nt.e)(Ct,Et(Object(Nt.a)(It.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,271)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(m.a,{store:Mt,children:Object(r.jsx)(f.a,{children:Object(r.jsx)(yt,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Dt()}},[[232,1,2]]]);
//# sourceMappingURL=main.dace572f.chunk.js.map